/*! This file is created by binhg atWed Oct 11 2017 14:09:12 GMT+0800 (中国标准时间) */
webpackJsonp([4],[,,,,,,,,,,,,function(t,e,n){var o;o=function(t,e,n){e.isBFS=function(){return location.href.indexOf("qiejf.com")===-1},e.splitArray=function(t,e){for(var n=[],o=0;o<t.length;){var i=t.slice(o,o+e);n.push(i),o+=e}return n},e.cloneArrayDeep=function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];o instanceof Array?o=arguments.callee(o):o instanceof Object&&(o=$.extend(!0,{},o)),e.push(o)}return e},e.extendObjectArray=function(t,e,n){var o={oldKeyName:"id",newKeyName:"id",oldKeyNameTwo:!1,newKeyNameTwo:!1};o=$.extend(o,n||{});for(var i=[],r=0;r<t.length;r++){for(var a=t[r],c=0;c<e.length;c++){var u=e[c];u[o.newKeyName]+""==a[o.oldKeyName]+""&&(o.oldKeyNameTwo&&o.newKeyNameTwo?u[o.newKeyName]+""==a[o.oldKeyName]+""&&u[o.newKeyNameTwo]+""==a[o.oldKeyNameTwo]+""&&(a=$.extend(!0,a,u)):a=$.extend(!0,a,u))}i.push(a)}return i},e.filterArrayFirst=function(t,e,n){return e=e||"value",n=n||"",t.length>0?t[0][e]:n},e.addKey4ArrayObj=function(t,e,n){for(var o=[],i=0;i<t.length;i++){var r=t[i];r[e]=n,o.push(r)}return o},e.extractMultipleObjectArray=function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];"object"==typeof o&&o instanceof Array?e=e.concat(arguments.callee(o)):"object"==typeof o&&e.push(o)}return e},e.removeHeight=function(t){var e=t.attr("style");if(e){var n=e.indexOf("height"),o=e.indexOf(";",n);if(n!=-1){var i=e.substring(n,o+1),r=e.replace(i,"");t.attr("style",r)}}},e.formaterDate=function(t){if(t.split("-").length>1)return t;t+="";var e="";return e+=t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6)},e.formaterPoint4=function(t){return Number(t).toFixed(4)},e.formaterPoint2=function(t){return Number(t).toFixed(2)},e.formaterThounthand=function(t,e){t=Number(t).toFixed(e||2)+"";var n=t.split(".");t=n[0];var o="";"-"===t.substr(0,1)&&(o=t.substr(0,1),t=t.substr(1));for(var i=n[1]||"",r=[],a=t.length;a>-3;){if(t.length<=3){r.push(t);break}if(a-=3,r.push(t.substr(a,3)),a<=3&&a>0){r.push(t.substr(0,a));break}}return o+r.reverse().join(",")+"."+i},e.formaterPercent=function(t){return t+"%"},e.serializeSingleObject=function(t){var e="",n=0;for(var o in t){var i=t[o];"object"==typeof i&&i instanceof Array&&(i=i.join(",")),"function"==typeof i&&"object"==typeof i||(0===n?(e+=o+"="+i,n++):e+="&"+o+"="+i)}return e},e.isEmptyObject=function(t){var e=!0;for(var n in t)e=!1;return e},e.formaterJsonUglify=function(t){return JSON.stringify(t).replace(/\{/g,"$left_quote$").replace(/\}/g,"$right_quote$").replace(/"/g,"$double_quote$").replace(/:/g,"=").replace(/\[/g,"$left_middle_quote$").replace(/\]/g,"$right_middle_quote$")},e.packageJsonFromUglify=function(t){return t=t.replace(/\$left_quote\$/g,"{").replace(/\$right_quote\$/g,"}").replace(/\$double_quote\$/g,'"').replace(/=/g,":").replace(/\$left_middle_quote\$/,"[").replace(/\$right_middle_quote\$/,"]"),JSON.parse(t)},e.getToday=function(){return new Date},e.getCurrentDate=function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},e.getMonthDay=function(t,e){var n=new Date(t,e,0);return n.getDate()},e.cleanPageTip=function(){$('[mapping="tipbar"]').remove(),$('[istipshow="0"]').attr("istipshow","1")},e.concatSelect=function(t,e,n,o,i){var r=o||"name",a=i||"value",c=e,u=n||"";t.html("").append(u);for(var s=0;s<c.length;s++){var l=c[s];t.append('<option value="'+l[a]+'">'+l[r]+"</option>")}},$.extend(Date.prototype,{format:function(t){t=t||"YYYY-MM-DD HH:mm:SS";var e=t.indexOf("YYYY"),n=t.indexOf("MM"),o=t.indexOf("DD"),i=t.indexOf("HH"),r=t.indexOf("mm"),a=t.indexOf("SS");if(e!==-1&&(t=t.replace("YYYY",this.getFullYear()+"")),n!==-1){var c=this.getMonth()<9?"0"+(this.getMonth()+1):this.getMonth()+1+"";t=t.replace("MM",c)}if(o!==-1){var u=this.getDate()<10?"0"+this.getDate():this.getDate()+"";t=t.replace("DD",u)}if(i!==-1){var s=this.getHours()<10?"0"+this.getHours():this.getHours()+"";t=t.replace("HH",s)}if(r!==-1){var l=this.getMinutes()<10?"0"+this.getMinutes():this.getMinutes()+"";t=t.replace("mm",l)}if(a!==-1){var f=this.getSeconds()<10?"0"+this.getSeconds():this.getSeconds()+"";t=t.replace("SS",f)}return t},getSubDate:function(t,e){var n=this.getFullYear(),o=this.getMonth(),i=this.getDate(),r=(new Date(this.getFullYear(),this.getMonth(),0).getDate(),new Date(this.getFullYear(),this.getMonth()-1,0).getDate());return"YYYY"===t&&(n-=e),"MM"===t&&(o-=e,0===o?n-=1:o<0&&(o+=11,n-=1),i>new Date(n,o+1,0).getDate()&&(i=new Date(n,o+1,0).getDate())),"DD"===t&&(i-=e,0===i?(i=r,o-=1):i<0&&(i=r+i,o-=1),0===o?n-=1:o<0&&(o+=11,n-=1)),new Date(n,o,i)},getMonthDay:function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()}}),window.ArrayPlus=function(t){return $.extend(t,{objectChildFilter:function(t,e){var n=[];for(var o in this){var i=this[o];i[t]&&(i[t]+"").indexOf(e+"")!==-1&&n.push(i)}return n},objectChildFilterByBoolean:function(t,e){for(var n=[],o=0;o<this.length;o++){var i=this[o];i[t]===e&&n.push(i)}return n},addKey4ArrayObj:function(t,e){for(var n=[],o=0;o<this.length;o++){var i=this[o];i[t]=e,n.push(i)}return n},replaceChildProp:function(t,e,n){n=n||!1;for(var o=0;o<this.length;o++)this[o][e]=angular.copy(this[o][t]),n&&delete this[o][t];return this},setKeyArrayObj:function(t,e,n,o){for(var i=[],r=0;r<this.length;r++){var a=this[r];n&&o&&a[n]+""!=o+""||(a[t]=e),i.push(a)}return i},replaceChild:function(t,e,n){for(var o=[],i=0;i<this.length;i++){var r=this[i];r[t]===e?o.push(n):o.push(r)}return o},splitBy:function(t){for(var e=[],n=0;n<this.length;n++){var o=this.slice(n,n+t);e.push(o),n+=t}return e},delChild:function(t,e){for(var n=[],o=0;o<this.length;o++){var i=this[o];i[t]!==e&&n.push(i)}return n},extractChildArray:function(t,e){for(var n=[],o=0;o<this.length;o++){var i=this[o];i[t]&&n.push(i[t])}return e?n.join(","):n},extractChildArrayByindexArray:function(t){for(var e=[],n=0;n<t.length;n++){var o=this[t[n]];e.push(o)}return e},isContain:function(t){for(var e=0;e<this.length;e++){var n=this[e];if(n===t)return!0}return!1},remove:function(t){var e;for(var n in this)this[n]===t&&(e=n);return e&&this.splice(e,1),this},linkAnotherArray:function(t,e,n,o){for(var i=[],r=0;r<this.length;r++){for(var a=this[r],c=!1,u=0;u<t.length;u++){var s=t[u];s+""==a[e]+""&&(c=!0)}c&&(a[n]=o),i.push(a)}return i},extractByAnotherArray:function(t,e){for(var n=[],o=0;o<this.length;o++){for(var i=this[o],r=!1,a=0;a<t.length;a++){var c=t[a];c+""==i[e]+""&&(r=!0)}r&&n.push(i)}return n},extendObjectArray:function(t,e){for(var n=[],o=0;o<this.length;o++){for(var i=this[o],r=0;r<t.length;r++){var a=t[r];i[e]+""==a[e]+""&&(i=$.extend({},i,a))}n.push(i)}return n},changeObjectArray2Object:function(t){for(var e={},n=0;n<this.length;n++){var o=this[n];e[o[t]]=o}return e},linkAnotherObjectArray:function(t,e,n,o){if(t.length<1)return this;for(var i=[],r=0;r<this.length;r++){for(var a=this[r],c=!1,u=0;u<t.length;u++){var s=t[u];s[e]+""==a[e]+""&&(c=!0)}c?a[n]=o:a[n]=void 0,i.push(a)}return i},indexOfObject:function(t,e){for(var n=0;n<this.length;n++){var o=this[n];if(o[t]===e)return n}return-1},interChangePreObject:function(t){var e=0;if(t=Number(t),isNaN(t)||t>this.length-1)return this;e=0===t?this.length-1:t-1;var n=$.extend({},this[t]);return this[t]=$.extend({},this[e]),this[e]=$.extend({},n),this},interChangeNextObject:function(t){var e=0;if(t=Number(t),isNaN(t)||t>this.length-1)return this;e=t===this.length-1?0:t+1;var n=$.extend({},this[t]);return this[t]=$.extend({},this[e]),this[e]=$.extend({},n),this}})},e.capitalRMB=function(t,e){function n(t){var e=new RegExp("%u..","g"),n=new RegExp("%.","g");return escape(t).replace(e,"").replace(n,"").length}function o(t){if(isNaN(t))return"不是一个有效的数字，请重新输入！";var e=new Number(t);if(e>1e18)return"您输入的数字太大，重新输入！";var o=(""+t).replace(/(^0*)/g,"").split(".");if(o.length>1&&n(o[1])>2)return cap="小数点位数不应超过2位",cap;var c,u,s=Math.round(100*e).toString(10);u=0;var l=s.length,f="";for(c=0;c<l;c++)f=f+i(s.charAt(c))+r(l-c-1);return a(f)}function i(t){switch(t){case"0":return"零";case"1":return"壹";case"2":return"贰";case"3":return"叁";case"4":return"肆";case"5":return"伍";case"6":return"陆";case"7":return"柒";case"8":return"捌";case"9":return"玖";default:return""}}function r(t){if(t>10)return t-=8,r(t);switch(t){case 0:return"分";case 1:return"角";case 2:return"圆";case 3:return"拾";case 4:return"佰";case 5:return"仟";case 6:return"万";case 7:return"拾";case 8:return"佰";case 9:return"仟";case 10:return"亿"}}function a(t){t=t.replace("零分",""),t=t.replace("零角","零");var e,n;for(n=t,e=0;;){var o=n.length;if(n=n.replace("零圆","圆"),n=n.replace("零万","万"),n=n.replace("零亿","亿"),n=n.replace("零仟","零"),n=n.replace("零佰","零"),n=n.replace("零零","零"),n=n.replace("零拾","零"),n=n.replace("亿万","亿零"),n=n.replace("万仟","万零"),n=n.replace("仟佰","仟零"),e=n.length,e==o)break}return e=n.length,"零"==n.charAt(e-1)&&(n=n.substring(0,e-1)),e=n.length,"圆"==n.charAt(e-1)&&(n=n),n}return o(t)},e.isCurrentData=function(t){return void 0!==t&&void 0!==t.data&&""!==t.data&&200===t.code},e.isCurrentResponse=function(t){return t&&200===t.code},$.ajaxSetup({error:function(t,e,n){401===t.status&&mui.alert("您已经过长时间未登陆,请重新登陆","温馨提示",function(){window.close()})},complete:function(t){var e=t.responseText;try{var n=JSON.parse(e);401===n.code&&mui.alert("您已经过长时间未登陆,请重新登陆","温馨提示",function(){window.close()})}catch(t){}}})}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){var o;o=function(t,e,n){window.$$btDisQuene=[],e.direcPlus=function(t){t.directive("ngFocus",["$parse",function(t){return function(e,n,o){var i=t(o.ngFocus);n.bind("focus",function(t){e.$apply(function(){i(e,{$event:t})})})}}]),t.directive("ngBlur",["$parse",function(t){return function(e,n,o){var i=t(o.ngBlur);n.bind("blur",function(t){e.$apply(function(){i(e,{$event:t})})})}}]),t.directive("ngLoad",["$parse",function(t){return function(e,n,o){var i=t(o.ngLoad);n.bind("load",function(t){e.$apply(function(){i(e,{$event:t})})})}}]),t.directive("ngRepeatEnd",["$timeout",function(t){return{restrict:"A",link:function(e,n,o){e.$last===!0&&t(function(){e.$emit("ngRepeatFinished")})}}}]),t.directive("ngOptionFilter",["$timeout",function(t){return{restrict:"A",controller:["$scope","$attrs","$element","$transclude","$log",function(t,e,n,o,i){}],link:function(t,e,n){function o(){i.parent("select").find("option").each(function(){var t=$(this),e=t.val();e.indexOf("?")!==-1&&t.remove()})}var i=$(e[0]);t.$last===!0&&o();var r=i.parents("select").attr("ng-model");t.$watch(r,function(){o()})}}}]),t.directive("ngBoxEnabled",[function(){return{restrict:"EA",replace:!1,controller:["$scope","$attrs","$element","$transclude","$log",function(t,e,n,o,i){}],link:function(t,e,n){function o(t){if(!t)return!1;var e=t.split(".");return{first:$.trim(e[0]),second:e.length>1?$.trim(e[1]):""}}function i(t,e){var n;return t.each(function(){var t=$(this);t.val()===e+""&&(n=t.text())}),n}function r(e){var n=o(e.attr("ng-model")||e.attr("bt-date")),r=t[n.first][n.second];if($targetEle=e,n)return e.is("select")?i(e.find("option"),r):r}function a(t){g.find("input:text,select,textarea").each(function(){var e=$(this),n=r(e);if(t){e.hide(),e.nextAll('[mapping="ng-box-disabled"]').remove().end().after('<span mapping="ng-box-disabled"></span>').next().text(n);var o=e.parents(".div-text-left");o.length>0&&o.removeClass("div-text-left").addClass("div-text-disabled")}else{var o=e.parents(".div-text-disabled");o.length>0&&o.removeClass("div-text-disabled").addClass("div-text-left"),e.show(),e.nextAll('[mapping="ng-box-disabled"]').remove()}})}function c(){for(var e=!1,n=0;n<d.length;n++){var o=$.trim(d[n]);"number"===h&&(o=Number(o));var i=l.split("."),r=$.trim(i[0]),c=i.length>1?$.trim(i[1]):null;if(e=i.length>1?t[r][c]==o:t[r]==o)break}a(!e)}var u=n.ngBoxEnabled,s=u.split("="),l=s[0],f=s[1],p=f.split("|"),d=p[0].split(","),h=p.length>1?p[1]:"string",g=$(e[0]);t.$watch(o(l).first,c),t.$$emiterBoxEnabled=c}}}]),t.directive("ngMaxDate",[function(){return{restrict:"EA",replace:!1,controller:["$scope","$attrs","$element","$transclude","$log",function(t,e,n,o,i){}],link:function(t,e,n){var o=$(e[0]),i=o.prev(),r=i.attr("bt-date").split("."),a=$.trim(r[0]),c=r.length>1&&$.trim(r[1]);o.click(function(){var e=$(this);e.is(".active")?(e.removeClass("active"),i.val(e.attr("prevValue")),c?t[a][c]=e.attr("prevValue"):t[a]=e.attr("prevValue")):(e.addClass("active"),e.attr("prevValue",i.val()),i.val("2099-12-31"),c?t[a][c]="2099-12-31":t[a]="2099-12-31")}),i.click(function(){o.removeClass("active")})}}}]),t.directive("ngCheckboxGroup",[function(){return{restrict:"EA",replace:!1,controller:["$scope","$attrs","$element","$transclude","$log",function(t,e,n,o,i){}],link:function(t,e,n){function o(){if(!r)return!0;var n=$.trim(r.split("in")[1]);return t[n].length===$(e[0]).parent().find("tr").length}function i(t,e){for(var n=[],o=0;o<t.length;o++){var i=t[o];i!==e&&n.push(i)}return n}var r=n.ngRepeat;if(t.$last&&o()){var a=function(){var t=$(e[0]),n=t.parents("[ng-wrap]");return n.length>0?n:t}(),c=a.find("input:checkbox"),u=c.filter(":not([ng-checkbox-all])"),s=c.filter("[ng-checkbox-all]"),l=$.trim(n.ngCheckboxGroup||"");u.click(function(){var e=this;t.$apply(function(){e.checked===!0?(t[l].push(e.value),t[l]=$.extend({},t[l])):t[l]=i(t[l],e.value)})}),s.click(function(){u.prop("checked",this.checked)}),t.$watch(l,function(t){t.length===u.length?s.prop("checked",!0):s.prop("checked",!1)})}}}}]),t.directive("ngCheckboxArray",[function(){return{restrict:"EA",replace:!1,controller:["$scope","$attrs","$element","$transclude","$log",function(t,e,n,o,i){}],link:function(t,e,n){function o(t){if(s&&s.length>0){var e=!0;t.each(function(){this.checked||(e=!1)}),e&&s.prop("checked",!0)}}function i(t,e){for(var n=!1,o=0;o<t.length;o++){var i=t[o];i===e&&(n=!0)}return n}function r(t){var e=[];return t.each(function(){this.checked&&e.push(this.value)}),e}function a(t,e){var n=[];return t.each(function(){this.checked&&this.value!==e&&n.push(this.value)}),n}var c=$(e[0]),u=c.parents("[ng-checkbox-wrap]"),s=u.length>0&&u.find("[ng-checkbox-all]"),l=n.ngCheckboxArray;c.click(function(){var e=u.find("[ng-checkbox-array]");this.checked?(o(e),i(t[l],this.value)||t.$apply(function(){t[l]=r(e)})):(s&&s.prop("checked",!1),t.$apply(function(){t[l]=a(e,this.value)}))})}}}]),t.directive("ngCheckboxAll",[function(){return{restrict:"EA",replace:!1,controller:["$scope","$attrs","$element","$transclude","$log",function(t,e,n,o,i){}],link:function(t,e,n){function o(t){var e=[];return t.each(function(){e.push(this.value)}),e}var i=$(e[0]),r=i.parents("[ng-checkbox-wrap]"),a=(r.length>0&&r.find("[ng-checkbox-all]"),n.ngCheckboxArray);i.click(function(){var e=r.find("[ng-checkbox-array]");if(this.checked)e.prop("checked",!0),t.$apply(function(){t[a]=o(e)});else{var n=e.filter(":hidden,:disabled"),i=e.filter(":visible,:enabled");t.$apply(function(){t[a]=o(n)}),i.prop("checked",!1)}})}}}]),t.directive("ngPage",["$parse",function(t){return{restrict:"EA",replace:!1,controller:["$scope","$attrs","$element","$transclude","$log",function(t,e,n,o,i){}],template:'<p mapping="PAGEHOLDER" ng-show="($$$PAGEFLAG !== \'doing\')&& (conf.pageNum< conf.pages)" class="gray9 f12 mt10" align="center"><span>现已加载{{conf.pageNum}}/{{conf.pages}}页</span><span class="page-message">,点击加载更多</span></p><p class="gray9 f12 mt10" ng-show="($$$PAGEFLAG === \'doing\')&& (conf.pageNum< conf.pages)" align="center"><span ng-message>努力加载中......</span></p><p ng-show="conf.pageNum >= conf.pages" class="gray9 f12 mt10" align="center"><span>现已加载{{conf.pageNum}}/{{conf.pages}}页</span><span ng-message>,已加载所有记录!</span></p>',scope:{conf:"=",func:"&"},link:function(e,n,o){var i=$(n[0]);i.find('[mapping="PAGEHOLDER"]').click(function(){if("doing"!==e.$$$PAGEFLAG){e.$apply(function(){e.$$$PAGEFLAG="doing",e.conf.pageNum++});var n=t(e.func)(e);n&&n.success(function(){e.conf.pageNum!==e.conf.pages&&e.$apply(function(){e.$$$PAGEFLAG="air"})})}})}}}])}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){var o;o=function(t,e,n){e.filterPlus=function(t){t.filter("dateFilter",function(){return function(t,e){if(!t)return"----";if(e=e||"/",t.split(e).length>1)return t;t+="";var n="";return n+=t.substr(0,4)+e+t.substr(4,2)+e+t.substr(6)}}).filter("timeFilter",function(){return function(t,e){if(!t)return"---";if(e=e||"/",t.split(e).length>1)return t;t+="";var n="";return n+=t.substr(0,2)+e+t.substr(2,2)+e+t.substr(4)}}).filter("datetimef",function(){return function(t,e){if(!t)return"----";if(e=e||"-",t.split(e).length>1)return t;t+="";var n="";return n+=t.substr(0,4)+e+t.substr(4,2)+e+t.substr(6,2)+" "+t.substr(8,2)+":"+t.substr(10,2)}}).filter("moneyFilter",function(){return function(t,e){if(void 0===t)return"----";t=Number(t).toFixed(e||2)+"";var n=t.split(".");t=n[0];var o="";"-"===t.substr(0,1)&&(o=t.substr(0,1),t=t.substr(1));for(var i=n[1]||"",r=[],a=t.length;a>-3;){if(t.length<=3){r.push(t);break}if(a-=3,r.push(t.substr(a,3)),a<=3&&a>0){r.push(t.substr(0,a));break}}return o+r.reverse().join(",")+"."+i}}).filter("downf",function(){return function(t,e){return BTServerPath+"/Wechat/Platform/fileDownload?id="+t}}).filter("downPdf",function(){return function(t){return BTServerPath+"/Wechat/Scf/ElecAgree/downloadAgreePDF?appNo="+t}}).filter("baseInfoF",function(){return function(t){return BTServerPath+"/scf2/views/supplier/info/basicInfo.html#"+t}}).filter("downpf",function(){return function(t,e){return"0"===e?BTServerPath+"/ScfRequest/exportNoticeReport?requestNo="+t:BTServerPath+"/ScfRequest/exportOpinionReport?requestNo="+t}}).filter("kindf",function(){return function(t,e){return BTDict[e]?BTDict[e].get(t)||"----":"----"}}).filter("areaf",function(){return function(t){if(!t||6!=t.length)return"----";var e;if(2===t.indexOf("0000"))return e=BTDict.Provinces.getItem(t).name;var n=t.substr(0,2)+"0000",o=BTDict.Provinces.getItem(n),i=o.name,r=o.citys.getItem(t).name;return e=i+r}}).filter("groupf",function(){return function(t,e){if(!BTDict[e]&&""===t)return"----";for(var n=t.split(","),o=[],i=0;i<n.length;i++){var r=n[i];o.push(BTDict[e].get(r))}return o.join(" | ")}}).filter("percentf",function(){return function(t){return t?t+""=="0"||t+""==""?"----":t+"%":"----"}}).filter("permillf",function(){return function(t){return t+""=="0"||t+""==""?"----":t+"‰"}}).filter("cstatusf",function(){return function(t){return void 0===t||""===t?"----":"0"===t||0===t?"未签署":"1"===t||1===t?"成功":"失败"}}).filter("emptyf",function(){return function(t,e){return void 0===t||""===t?"----":t+(e||"")}})}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){var o;o=function(t,e,n){e.servPlus=function(t){t.service("commonService",["$rootScope",function(t){return{queryDicList:function(t,e,n,o,i){var r={name:"name",value:"value"};$.extend(r,i),$.post(t,e,function(t){if(void 0!==t&&void 0!==t.data&&""!==t.data&&200===t.code){if(n){var e=new ListMap;for(var i in t.data){var a=t.data[i];e.set(a[r.value],a[r.name])}BTDict[n]=e}o&&o(t.data)}},"json")},queryBaseInfoList:function(t,e,n,o,i,r){var a={name:"name",value:"value",isChange:!1};$.extend(a,r||{});var c=$.ajax({url:t,data:e,type:"POST",dataType:"json"});return c.success(function(t){if(void 0!==t&&void 0!==t.data&&""!==t.data&&200===t.code){var e=[];if(i&&i.length>0){var r=new ListMap;for(var c in t.data){var u=t.data[c];r.set(u[a.value],u[a.name]),a.isChange&&e.push({name:u[a.name],value:u[a.value]})}BTDict[i]=r}n&&o&&o.length>0&&n.$apply(function(){a.isChange?n[o]=e:n[o]=t.data})}}),c},initPage:function(t){t()}}}]).service("http",["$q",function(t){function e(t,e,n,o){return o=o||"json",$.ajax({url:e,type:t,data:n,dataType:o})}return{post:function(t,n,o){return e("POST",t,n,o).success(function(t){t&&401===t.code&&(window.location.href="./index.html#/accountBind")})},get:function(t,n,o){return e("GET",t,n,o).success(function(t){t&&401===t.code&&(window.location.href="./index.html#/accountBind")})},ajax:function(t){if(t.success||t.error||t.complete)try{delete t.success,delete t.error,delete t.complete}catch(t){console&&console.log("http服务:非promise回调函数销毁异常!")}return $.ajax(t)}}}]).service("form",[function(){return{getCheckedList:function(t,e,n){var o={trueFlag:!1,falseFlag:!1},i=[];return $.extend(o,e||{}),t.each(function(){$(this);this.checked===!0?o.trueFlag||0===o.trueFlag?i.push(o.trueFlag):i.push(this.value):n||(o.falseFlag||0===o.falseFlag?i.push(o.falseFlag):i.push("none"))}),i},setCheckedList:function(t,e,n,o){var i={trueFlag:!1,falseFlag:!1},r=[];return $.extend(i,e||{}),t.each(function(t){$(this);if(o)for(var e=0;e<n.length;e++){var r=n[e];r+""==this.value+""?this.checked=!0:this.checked=!1}else{var a=n[t];i.trueFlag||0===i.trueFlag?a+""==i.trueFlag+""?this.checked=!0:this.checked=!1:a+""==this.value+""?this.checked=!0:this.checked=!1}}),r},getCheckboxValueArray:function(t,e){var n=[];return t.each(function(){this.checked&&n.push(this.value)}),e?n.join(","):n}}}]).service("easyPlugin",function(){function t(t,e){for(var n=[],o=0;o<e.length;o++){var i=e[o];n.push(i);var r=t.tree("getData",i.target),a=r.children;a&&a.length>0&&(n=n.concat(arguments.callee(t,a)))}return n}function e(t,e){for(var n=[],o=0;o<t.length;o++){var i=t[o],r=$(i.target);r.find(".tree-checkbox1,.tree-checkbox2").length>0&&n.push(i[e||"id"])}return n.join(",")}return{getTreeCheckedId:function(n){var o=n.tree("getRoots");return e(t(n,o))}}}).service("muiSupport",["$timeout",function(t){return{slide:function(t,e){if(e=e||5e3,!mui)return void(console&&console.info("mui并未加载完成"));mui.init({swipeBack:!0});var n=mui(t);n.slider({interval:e})},singleSelect:function(t){mui.init();var e=new mui.PopPicker;return e.setData(t),e},dateSelect:function(t){mui.init();var e=arguments.callee;t.endYear=t.endYear?t.endYear:2099,t.beginYear=t.beginYear?t.beginYear:1900;var n=new mui.DtPicker(t);return n.beginShow=function(t,n,o,i){this.show(function(r){var a=Number(r.y.text),c=Number(r.m.text),u=Number(r.d.text);t[n].dispose(),t[n]=e({type:"date",value:o,beginYear:a,beginMonth:c,beginDay:u}),"function"==typeof i&&i(r)})},n.endShow=function(t,n,o,i){this.show(function(r){var a=Number(r.y.text),c=Number(r.m.text),u=Number(r.d.text);t[n].dispose(),t[n]=e({type:"date",value:o,endYear:a,endMonth:c,endDay:u}),"function"==typeof i&&i(r)})},n},crtLinkDate:function(t,e,n){n=n||"-";var o=t.split(n),i=e.split(n),r=this.dateSelect({type:"date",value:t,endYear:Number(i[0]),endMonth:Number(i[1]),endDay:Number(i[2])}),a=this.dateSelect({type:"date",value:e,beginYear:Number(o[0]),beginMonth:Number(o[1]),beginDay:Number(o[2])});return{begin:r,end:a}},showBar:function(){$("#progress").show()},hideBar:function(){t(function(){$("#progress").hide()},1e3)}}}]).service("cache",["$rootScope",function(t){return t.$$$cache={},{put:function(e,n){t.$$$cache[e]=angular.extend({},n)},get:function(e){return t.$$$cache[e]},remove:function(){delete t.$$$cache[key]},getParam:function(){var t=location.search,e=t.match(/([a-zA-Z0-9_]+=[a-zA-Z0-9_]+)/g),n={};if(e)for(var o=0;o<e.length;o++){var i=e[o],r=i.split("=");n[r[0]]=r[1]?r[1]:""}return n}}}]).service("scopeBridge",[function(){return{getParent:function(t){return t.$parent},getChildHead:function(t){return t.$$childHead},getChildTail:function(t){return t.$$childTail},getRouteScope:function(t){try{return t.current.scope}catch(t){}return{}},getParentProp:function(t,e){var t=t.$parent;return t&&t[e]?angular.copy(t[e]):{}},getChildHeadProp:function(t,e){var t=t.$$childHead;return t&&t[e]?angular.copy(t[e]):{}},getChildTailProp:function(t,e){var t=t.$$childTail;return t&&t[e]?angular.copy(t[e]):{}}}}])}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){var o=[];o.push(n(17)),o.push(n(18)),o.push(n(19)),o.push(n(20)),o.push(n(21)),e.installAllControllers=function(){for(var t=0;t<o.length;t++){var e=o[t];e.installController.apply(window,arguments)}}},function(t,e){e.installController=function(t,e){t.controller("flow.financeDetailController",["$scope","muiSupport","http","$rootScope","$route","cache","commonService",function(t,n,o,i,r,a,c){var u=a.get("currentTask");t.businessInfo={requestNo:u.workFlowBusiness.businessId,nodeName:u.workFlowNode.nickname},t.info={},t.scheme={},t.recieveList=[],t.billList=[],t.materialList=[],t.otherInfoList=[],t.loanInfo={},t.agreeList=[];var s={2:{type:"bill",list_name:"billList"},3:{type:"recieve",list_name:"recieveList"}};t.creditList=[],t.queryFinanceInfo=function(e){var n=o.post(BTPATH.QUERY_FINANCE_DETAIL,{requestNo:e}).success(function(e){void 0!==e&&void 0!==e.data&&""!==e.data&&200===e.code&&t.$apply(function(){t.info=e.data})});return n},t.queryLoanSchemeInfo=function(e){var n=o.post(BTPATH.FIND_SCHEME,{requestNo:e}).success(function(e){void 0!==e&&void 0!==e.data&&""!==e.data&&200===e.code&&t.$apply(function(){t.loanInfo=e.data})});return n},t.queryProofList=function(){var n=t.info.requestType,i=t.info.orders,r=s[n];n&&r&&o.post(BTPATH.FIND_SUBJECT_MASTER,{type:n,id:i}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t[r.list_name]=e.cloneArrayDeep(n.data)})})},t.queryCreditList=function(){var n=o.post(BTPATH.FIND_CREDIT,{custNo:t.info.custNo,coreCustNo:t.info.coreCustNo,factorNo:t.info.factorNo}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.creditList=ArrayPlus(n.data).replaceChildProp("name","text",!0)})});return n},t.$on("$routeChangeSuccess",function(){var e=t.businessInfo.requestNo;t.queryFinanceInfo(e).success(function(){t.queryProofList(e),c.queryBaseInfoList(BTPATH.FIND_CREDIT,{custNo:t.info.custNo,coreCustNo:t.info.coreCustNo,factorNo:t.info.factorNo},t,"creditList","_CreditDict"),c.queryBaseInfoList(BTPATH.QUERY_UPLOAD_LIST,{batchNo:t.info.batchNo},t,"materialList")}),t.queryLoanSchemeInfo(e),c.queryBaseInfoList(BTPATH.QUERY_OTHER_FILE_LIST,{requestNo:e},t,"otherInfoList"),c.queryBaseInfoList(BTPATH.FIND_ELEC_AGREE_BY_REQUESTNO,{requestNo:e,signType:""},t,"agreeList")})}])}},function(t,e){e.installController=function(t,e){t.controller("flow.financeAuditController",["$scope","muiSupport","http","$rootScope","$route","cache","commonService",function(t,n,o,i,r,a,c){t.$GET_RESULT=function(e){var n=t.info.verifyCode,o=t.businessInfo.requestNo;return"handle"!==e||n?{requestNo:o,smsCode:n}:void mui.alert("请填写验证码!")};var u=a.get("currentTask");t.businessInfo={requestNo:u.workFlowBusiness.businessId,nodeName:u.workFlowNode.nickname},t.info={},t.scheme={},t.recieveList=[],t.billList=[],t.materialList=[],t.otherInfoList=[],t.loanInfo={},t.agreeList=[];var s={2:{type:"bill",list_name:"billList"},3:{type:"recieve",list_name:"recieveList"}};t.creditList=[],t.toggleEye=function(e,n){var o=e+"."+n,i=n+"Eye";t[e][i]=!t[e][i],console&&console.info(t[e][i]);var r=document.querySelector("[ng-model='"+o+"']");r.type=t[e][i]?"text":"password"},t.typeChange=function(t){t.type="password",$(t).unbind("focus")},t.identifyInfo={canSend:!0,timerMsg:""};var l;t.countDown=function(){var e=60;t.identifyInfo.canSend=!1,l=setInterval(function(){0===e?(t.$apply(function(){t.identifyInfo.canSend=!0}),clearInterval(l)):t.$apply(function(){e--,t.identifyInfo.timerMsg=e+"秒后可重新发送"})},1e3)},t.sendIdentifyCode=function(){o.post(BTPATH.OPEN_ACCOUNT_VERIFY_CODE,{mobileNo:""}).success(function(e){e&&200===e.code&&t.countDown()})},t.queryFinanceInfo=function(e){var n=o.post(BTPATH.QUERY_FINANCE_DETAIL,{requestNo:e}).success(function(e){void 0!==e&&void 0!==e.data&&""!==e.data&&200===e.code&&t.$apply(function(){t.info=e.data})});return n},t.queryLoanSchemeInfo=function(e){var n=o.post(BTPATH.FIND_SCHEME,{requestNo:e}).success(function(e){void 0!==e&&void 0!==e.data&&""!==e.data&&200===e.code&&t.$apply(function(){t.loanInfo=e.data})});return n},t.queryProofList=function(){var n=t.info.requestType,i=t.info.orders,r=s[n];n&&r&&o.post(BTPATH.FIND_SUBJECT_MASTER,{type:n,id:i}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t[r.list_name]=e.cloneArrayDeep(n.data)})})},t.queryCreditList=function(){var n=o.post(BTPATH.FIND_CREDIT,{custNo:t.info.custNo,coreCustNo:t.info.coreCustNo,factorNo:t.info.factorNo}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.creditList=ArrayPlus(n.data).replaceChildProp("name","text",!0)})});return n},t.$on("$routeChangeSuccess",function(){var e=t.businessInfo.requestNo;t.queryFinanceInfo(e).success(function(){t.queryProofList(e),c.queryBaseInfoList(BTPATH.FIND_CREDIT,{custNo:t.info.custNo,coreCustNo:t.info.coreCustNo,factorNo:t.info.factorNo},t,"creditList","_CreditDict"),c.queryBaseInfoList(BTPATH.QUERY_UPLOAD_LIST,{batchNo:t.info.batchNo},t,"materialList")}),t.queryLoanSchemeInfo(e),c.queryBaseInfoList(BTPATH.QUERY_OTHER_FILE_LIST,{requestNo:e},t,"otherInfoList"),c.queryBaseInfoList(BTPATH.FIND_ELEC_AGREE_BY_REQUESTNO,{requestNo:e,signType:""},t,"agreeList")})}])}},function(t,e){e.installController=function(t,e){t.controller("todoFlowController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){t.beginPicker={},t.endPicker={},_statusList=BTDict.BillNoteStatus.toArray("value","text"),t.searchData={GTEauditDate:(new Date).getSubDate("MM",3).format("YYYY-MM-DD"),LTEauditDate:(new Date).getSubDate("MM",-3).format("YYYY-MM-DD")},t.infoList=[],t.listPage={pageNum:1,pageSize:10},t.changeStatus=function(e){"begin"===e?t.beginPicker.beginShow(t,"endPicker",t.searchData.LTEauditDate,function(e){t.$apply(function(){t.searchData.GTEauditDate=e.text}),t.infoList=[],t.queryList()}):t.endPicker.endShow(t,"beginPicker",t.searchData.GTEauditDate,function(e){t.$apply(function(){t.searchData.LTEauditDate=e.text}),t.infoList=[],t.queryList()})},t.queryList=function(){return n.showBar(),o.post(BTPATH.QUERY_WORKFLOW_CURRENT_TASK,$.extend({},t.listPage,t.searchData,{flag:1})).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.infoList=t.infoList.concat(o.data),t.listPage=o.page})})},t.openHandle=function(t){a.put("WORKFLOW_TASK_FLAG",{readonly:"operate"}),a.put("currentTask",t),window.location.href="flow.html#"+t.workFlowNode.wechatForm},t.goDidFlow=function(){window.location.href="#/flow/didList"},t.$on("$routeChangeSuccess",function(){var e=n.crtLinkDate(t.searchData.GTEauditDate,t.searchData.LTEauditDate);t.beginPicker=e.begin,t.endPicker=e.end,t.queryList()})}])}},function(t,e){e.installController=function(t,e){t.controller("didFlowController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){t.beginPicker={},t.endPicker={},_statusList=BTDict.BillNoteStatus.toArray("value","text"),t.searchData={GTEauditDate:(new Date).getSubDate("MM",3).format("YYYY-MM-DD"),LTEauditDate:(new Date).getSubDate("MM",-3).format("YYYY-MM-DD")},t.infoList=[],t.listPage={pageNum:1,pageSize:10},t.changeStatus=function(e){"begin"===e?t.beginPicker.beginShow(t,"endPicker",t.searchData.LTEauditDate,function(e){t.$apply(function(){t.searchData.GTEauditDate=e.text}),t.infoList=[],t.queryList()}):t.endPicker.endShow(t,"beginPicker",t.searchData.GTEauditDate,function(e){t.$apply(function(){t.searchData.LTEauditDate=e.text}),t.infoList=[],t.queryList()})},t.queryList=function(){return n.showBar(),o.post(BTPATH.QUERY_WORKFLOW_HISTORY_TASK,$.extend({},t.listPage,t.searchData,{flag:1})).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.infoList=t.infoList.concat(o.data),t.listPage=o.page})})},t.showDetail=function(t){a.put("WORKFLOW_TASK_FLAG",{readonly:"readonly"}),a.put("currentTask",t),window.location.href="flow.html#"+t.workFlowBase.wechatForm},t.goTodoFlow=function(){window.location.href="#/flow/todoList"},t.$on("$routeChangeSuccess",function(){var e=n.crtLinkDate(t.searchData.GTEauditDate,t.searchData.LTEauditDate);t.beginPicker=e.begin,t.endPicker=e.end,t.queryList()})}])}},function(t,e){e.installController=function(t,e){t.controller("flowRecordController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){i.resultDict=[{value:0,name:"通过"},{value:1,name:"驳回"},{value:2,name:"作废"}],i.auditRecord=[],i.currentTask=a.get("currentTask"),i.auditListPage={pageNum:1,pageSize:10},t.listPage={pageNum:1,pageSize:10},i.queryAuditRecord=function(t){i.auditListPage.flag=t?1:2,o.post(BTPATH.QUERY_WORKFLOW_AUDIT_LIST,$.extend({businessId:i.currentTask.workFlowBusiness.businessId
},i.auditListPage)).success(function(n){e.isCurrentData(n)&&i.$apply(function(){i.auditRecord=n.data,t&&(i.auditListPage=n.page)})})},t.$on("$routeChangeSuccess",function(){t.queryAuditRecord(!0)})}])}},function(t,e){e.installRoute=function(t){t.config(["$routeProvider","$locationProvider",function(t,e){t.when("/home",{templateUrl:"views/home/home.html",controller:"homeController",title:"企e金服供应链金融"}).when("/bill",{templateUrl:"views/bill/bill.html",controller:"billController",title:"企e金服票据池"}).when("/flow/todoList",{templateUrl:"views/flow/todoFlow.html",controller:"todoFlowController",title:"待办任务列表"}).when("/flow/didList",{templateUrl:"views/flow/didFlow.html",controller:"didFlowController",title:"已办任务列表"}).when("/flow/flowRecord",{templateUrl:"views/flow/flowRecord.html",controller:"flowRecordController",title:"审批历史记录"}).when("/finance/detail",{templateUrl:"views/financeFlow/financeDetail.html",controller:"flow.financeDetailController",title:"融资详情"}).when("/finance/audit",{templateUrl:"views/financeFlow/financeAudit.html",controller:"flow.financeAuditController",title:"融资审批"}).otherwise({redirectTo:"/home"})}])}},function(t,e,n){var o;o=function(t,e,n){function o(t){if(!t)return"";var e,n,o,i,a,c;for(o=t.length,n=0,e="";n<o;){if(i=255&t.charCodeAt(n++),n==o){e+=r.charAt(i>>2),e+=r.charAt((3&i)<<4),e+="==";break}if(a=t.charCodeAt(n++),n==o){e+=r.charAt(i>>2),e+=r.charAt((3&i)<<4|(240&a)>>4),e+=r.charAt((15&a)<<2),e+="=";break}c=t.charCodeAt(n++),e+=r.charAt(i>>2),e+=r.charAt((3&i)<<4|(240&a)>>4),e+=r.charAt((15&a)<<2|(192&c)>>6),e+=r.charAt(63&c)}return e}function i(t){if(!t)return"";var e,n,o,i,r,c,u;for(c=t.length,r=0,u="";r<c;){do e=a[255&t.charCodeAt(r++)];while(r<c&&e==-1);if(e==-1)break;do n=a[255&t.charCodeAt(r++)];while(r<c&&n==-1);if(n==-1)break;u+=String.fromCharCode(e<<2|(48&n)>>4);do{if(o=255&t.charCodeAt(r++),61==o)return u;o=a[o]}while(r<c&&o==-1);if(o==-1)break;u+=String.fromCharCode((15&n)<<4|(60&o)>>2);do{if(i=255&t.charCodeAt(r++),61==i)return u;i=a[i]}while(r<c&&i==-1);if(i==-1)break;u+=String.fromCharCode((3&o)<<6|i)}return u}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);n.exports={base64encode:o,base64decode:i,uriBase64Encode:function(t){return o(encodeURIComponent(t))},uriBase64Decode:function(t){return decodeURIComponent(i(t))}}}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){var o=[];o.push(n(25)),o.push(n(26)),o.push(n(27)),o.push(n(28)),o.push(n(29)),o.push(n(30)),o.push(n(31)),o.push(n(32)),o.push(n(33)),o.push(n(34)),o.push(n(35)),o.push(n(36)),o.push(n(37)),o.push(n(38)),o.push(n(39)),o.push(n(40)),o.push(n(41)),o.push(n(42)),o.push(n(43)),o.push(n(44)),o.push(n(45)),o.push(n(46)),o.push(n(47)),o.push(n(48)),o.push(n(49)),o.push(n(50)),o.push(n(51)),o.push(n(52)),o.push(n(53)),o.push(n(54)),o.push(n(55)),o.push(n(56)),o.push(n(57)),o.push(n(58)),o.push(n(59)),o.push(n(60)),o.push(n(61)),o.push(n(62)),o.push(n(63)),o.push(n(64)),o.push(n(65)),o.push(n(66)),o.push(n(67)),o.push(n(68)),o.push(n(69)),o.push(n(70)),o.push(n(71)),o.push(n(72)),o.push(n(73)),o.push(n(74)),o.push(n(75)),o.push(n(76)),o.push(n(77)),o.push(n(78)),o.push(n(79)),o.push(n(80)),o.push(n(81)),o.push(n(82)),o.push(n(83)),o.push(n(84)),o.push(n(85)),o.push(n(86)),o.push(n(87)),o.push(n(88)),o.push(n(89)),o.push(n(90)),o.push(n(91)),o.push(n(92)),o.push(n(93)),o.push(n(94)),o.push(n(95)),o.push(n(96)),o.push(n(97)),o.push(n(98)),o.push(n(99)),o.push(n(100)),o.push(n(101)),o.push(n(102)),o.push(n(103)),e.installAllControllers=function(){for(var t=0;t<o.length;t++){var e=o[t];e.installController.apply(window,arguments)}}},function(t,e){e.installController=function(t){t.controller("homeController",["$scope","muiSupport",function(t,e){t.name="小明1",t.person={age:19},t.$on("$routeChangeSuccess",function(){e.slide("#slider")})}])}},function(t,e){e.installController=function(t,e){t.controller("home.financeController",["$scope","muiSupport","http","$location",function(t,n,o,i){function r(t){var e=document.getElementById("pool");if(t&&e){var n=e.getContext("2d");e.width=e.parentNode.offsetWidth,e.height=e.parentNode.offsetHeight;var o=(1-t)*e.height,i=0,r=["#C2E8FB","#ACE0F8"],a=function(){n.clearRect(0,0,e.width,e.height),i++;for(var t=0;t<r.length;t++){n.fillStyle=r[t];var c=(i+180*t)*Math.PI/180,u=10*Math.sin(c),s=10*Math.cos(c);n.beginPath(),n.moveTo(0,o+u),n.bezierCurveTo(e.width/2,o+u,e.width/2,o+s,e.width,o+s),n.lineTo(e.width,e.height),n.lineTo(0,e.height),n.closePath(),n.fill()}setTimeout(function(){a(n)},10)};a()}}t.todoTaskCount="0",t.creditInfo={creditLimit:0,creditUsed:0,creditBalance:0},t.lookDetail=function(t){},t.lookTodo=function(){window.location.href="flow.html#/flow/todoList"},t.queryTodoTaskCount=function(){o.post(BTPATH.QUERY_WORKFLOW_CURRENT_TASK_COUNT,{}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){n.data&&0===n.data?t.todoTaskCount="0":n.data&&n.data<100?t.todoTaskCount=""+n.data:n.data&&n.data>100?t.todoTaskCount="99+":t.todoTaskCount="0"})})},t.findCreditSum=function(){return o.post(BTPATH.FIND_CREDIT_SUM,{}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.creditInfo=n.data})})},t.switch=function(t){i.path("home/"+t)},t.$on("$routeChangeSuccess",function(){t.queryTodoTaskCount(),t.findCreditSum().success(function(){t.creditInfo.creditUsed&&t.creditInfo.creditLimit&&r(t.creditInfo.creditUsed/t.creditInfo.creditLimit)})})}])}},function(t,e){e.installController=function(t){t.controller("more.securityController",["$scope","muiSupport","http",function(t,e,n){t.info={},t.queryinforma=function(){n.post(BTPATH.FIND_OPERATOR_INFO,{}).success(function(e){e&&200==e.code&&t.$apply(function(){t.info=e.data})})},t.$on("$routeChangeSuccess",function(){t.queryinforma()})}])}},function(t,e){e.installController=function(t){t.controller("more.moreController",["$scope","$location","muiSupport",function(t,e,n){t.skipSecurity=function(){e.path("more/security")},t.skipCompany=function(){e.path("home/company")},t.$on("$routeChangeSuccess",function(){})}])}},function(t,e){e.installController=function(t,e){t.controller("news.cneterController",["$scope","$location","muiSupport","http",function(t,n,o,i){t.unreadNotificationCount="0",t.unreadNoticeCount="0",t.skipPublic=function(){n.path("/news/notice")},t.skipPersonal=function(){n.path("/news/personal")},t.queryUnreadNotificationCount=function(){i.post(BTPATH.COUNT_UNREAD_NOTIFICATION,{}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){n.data&&0===n.data?t.unreadNotificationCount="0":n.data&&n.data<100?t.unreadNotificationCount=""+n.data:n.data&&n.data>=100?t.unreadNotificationCount="99+":t.unreadNotificationCount="0"})})},t.queryUnreadNoticeCount=function(){i.post(BTPATH.COUNT_UNREAD_NOTICE,{}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){n.data&&0===n.data?t.unreadNoticeCount="0":n.data&&n.data<100?t.unreadNoticeCount=""+n.data:n.data&&n.data>=100?t.unreadNoticeCount="99+":t.unreadNoticeCount="0"})})},t.$on("$routeChangeSuccess",function(){t.queryUnreadNotificationCount(),t.queryUnreadNoticeCount()})}])}},function(t,e){e.installController=function(t,e){t.controller("news.noticeController",["$scope","muiSupport","http","cache",function(t,n,o,i){t.listPage={pageNum:1,pageSize:3},t.infoList=[],t.unreadList=[],t.unreadPage={},t.readList=[],t.readPage={},t.queryUnreadList=function(n){return o.post(BTPATH.QUERY_UNREAD_NOTICE_LIST,$.extend({},t.listPage,{flag:1})).success(function(o){o&&200==o.code&&t.$apply(function(){t.infoList=n?e.cloneArrayDeep(o.data):t.infoList.concat(o.data),t.listPage=o.page,t.unReadList=t.infoList,t.unReadPage=t.listPage})})},t.queryReadList=function(n){return o.post(BTPATH.QUERY_READ_NOTICE_LIST,$.extend({},t.listPage,{flag:1})).success(function(o){o&&200==o.code&&t.$apply(function(){t.infoList=n?e.cloneArrayDeep(o.data):t.infoList.concat(o.data),t.listPage=o.page,t.readList=t.infoList,t.readPage=t.listPage})})},t.queryUnreadNoticeCount=function(){o.post(BTPATH.COUNT_UNREAD_NOTICE,{}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){n.data&&0===n.data?t.unreadNoticeCount="0":n.data&&n.data<100?t.unreadNoticeCount=""+n.data:n.data&&n.data>=100?t.unreadNoticeCount="99+":t.unreadNoticeCount="0"})})},t.checkUnread=function(){return t.right=!1,t.unReadList&&0!=t.unReadList.length?(t.infoList=t.unReadList,void(t.listPage=t.unReadPage)):(t.infoList=[],t.listPage={pageNum:1,pageSize:3},void t.queryUnreadList(!0))},t.checkRead=function(){return t.right=!0,0!=t.readList.length?(t.infoList=t.readList,void(t.listPage=t.readPage)):(t.infoList=[],t.listPage={pageNum:1,pageSize:3},void t.queryReadList(!0))},t.queryMore=function(e){return t.right?t.queryReadList(e):t.queryUnreadList(e)},t.checkDetail=function(){i.put("right",{readStatus:t.right})},t.$on("$routeChangeSuccess",function(){t.right=i.get("right")&&i.get("right").readStatus||t.right,t.right?(t.queryReadList(!0),t.unReadPage=i.get("total")):t.queryUnreadList(!0).success(function(){i.put("total",t.unReadPage)})})}])}},function(t,e){e.installController=function(t,e){t.controller("news.personalController",["$scope","muiSupport","http","cache",function(t,n,o,i){t.listPage={pageNum:1,pageSize:3},t.infoList=[],t.unReadList=[],t.unReadPage={},t.readList=[],t.readPage={},t.queryUnreadNotificationCount=function(){o.post(BTPATH.COUNT_UNREAD_NOTIFICATION,{}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){n.data&&0===n.data?t.unreadNotificationCount="0":n.data&&n.data<100?t.unreadNotificationCount=""+n.data:n.data&&n.data>=100?t.unreadNotificationCount="99+":t.unreadNotificationCount="0"})})},t.queryUnreadList=function(n){return o.post(BTPATH.QUERY_UNREAD_PERSONAL_LIST,$.extend({},t.listPage,{flag:1})).success(function(o){o&&200==o.code&&t.$apply(function(){t.infoList=n?e.cloneArrayDeep(o.data):t.infoList.concat(o.data),t.listPage=o.page,t.unReadList=t.infoList,t.unReadPage=t.listPage})})},t.queryReadList=function(n){return o.post(BTPATH.QUERY_READ_PERSONAL_LIST,$.extend({},t.listPage,{flag:1})).success(function(o){o&&200==o.code&&t.$apply(function(){t.infoList=n?e.cloneArrayDeep(o.data):t.infoList.concat(o.data),t.listPage=o.page,t.readList=t.infoList,t.readPage=t.listPage})})},t.checkUnread=function(){return t.right=!1,0!=t.unReadList.length?(t.infoList=t.unReadList,void(t.listPage=t.unReadPage)):(t.infoList=[],t.listPage={pageNum:1,pageSize:3},void t.queryUnreadList(!0))},t.checkRead=function(){return t.right=!0,0!=t.readList.length?(t.infoList=t.readList,void(t.listPage=t.readPage)):(t.infoList=[],t.listPage={pageNum:1,pageSize:3},void t.queryReadList(!0))},t.queryMore=function(e){return t.right?t.queryReadList(e):t.queryUnreadList(e)},t.checkDetail=function(){i.put("right",{readStatus:t.right})},t.$on("$routeChangeSuccess",function(){t.right=i.get("right")&&i.get("right").readStatus||t.right,t.right?(t.queryReadList(!0),t.unReadPage=i.get("total")):t.queryUnreadList(!0).success(function(){i.put("total",t.unReadPage)})})}])}},function(t,e){e.installController=function(t,e,n){t.controller("news.noticeDetailController",["$scope","muiSupport","http","$route",function(t,e,o,i){t.detail={},t.queryNewsDetail=function(e){return o.post(BTPATH.QUERY_DETAIL_NOTICE,{id:e}).success(function(e){e&&200==e.code&&t.$apply(function(){t.detail=e.data,document.getElementById("content").innerHTML=n.uriBase64Decode(e.data.content)})})},t.$on("$routeChangeSuccess",function(){var e=i.current.pathParams.id;t.queryNewsDetail(e).success(function(t){o.post(BTPATH.SET_READ_NOTICE,{id:e}).success(function(t){})})})}])}},function(t,e){e.installController=function(t){t.controller("news.personalDetailController",["$scope","muiSupport","http","$route",function(t,e,n,o){t.detail={},t.queryNewsDetail=function(e){return n.post(BTPATH.QUERY_DETAIL_PERSONAL,{id:e}).success(function(e){e&&200==e.code&&t.$apply(function(){t.detail=e.data,document.getElementById("content").innerHTML=e.data.content})})},t.$on("$routeChangeSuccess",function(){var e=o.current.pathParams.id;t.queryNewsDetail(e).success(function(t){n.post(BTPATH.SET_READ_NOTIFICATION,{id:e}).success(function(t){})})})}])}},function(t,e){e.installController=function(t){t.controller("lead.financingController",["$scope","$location","muiSupport",function(t,e,n){t.$on("$routeChangeSuccess",function(){})}])}},function(t,e){e.installController=function(t){t.controller("lead.enquiryController",["$scope","$location","muiSupport",function(t,e,n){t.$on("$routeChangeSuccess",function(){})}])}},function(t,e){e.installController=function(t,e){t.controller("home.singleController",["$scope","muiSupport","http","$rootScope","$route","cache","$location",function(t,n,o,i,r,a,c){t.operCustInfo={operator:{},custInfo:{}},t.unreadNotificationCount="0",t.queryOperCustInfo=function(){o.post(BTPATH.FIND_OPERATOR_CUSTINFO,{}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.operCustInfo=n.data})})},t.countUnreadNotification=function(){o.post(BTPATH.COUNT_UNREAD_NOTIFICATION,{}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){o.post(BTPATH.COUNT_UNREAD_NOTICE,{}).success(function(o){e.isCurrentData(o)&&t.$apply(function(){var e=n.data+o.data;0===e?t.unreadNotificationCount="0":e<100?t.unreadNotificationCount=""+e:e>=100?t.unreadNotificationCount="99+":t.unreadNotificationCount="0"})})})})},t.switch=function(t){c.path("home/"+t)},t.$on("$routeChangeSuccess",function(){t.queryOperCustInfo(),t.countUnreadNotification()})}])}},function(t,e){e.installController=function(t,e){t.controller("home.informaController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,e,n,o,i,r){t.info={},t.queryinforma=function(){n.post(BTPATH.FIND_OPERATOR_INFO,{}).success(function(e){e&&200==e.code&&t.$apply(function(){t.info=e.data})})},t.$on("$routeChangeSuccess",function(){t.queryinforma()})}])}},function(t,e){e.installController=function(t,e){t.controller("home.companyprofileController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,e,n,o,i,r){t.$on("$routeChangeSuccess",function(){})}])}},function(t,e){e.installController=function(t,e){t.controller("home.introductController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,e,n,o,i,r){t.$on("$routeChangeSuccess",function(){})}])}},function(t,e){e.installController=function(t,e){t.controller("billController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){_statusPicker={},_statusList=BTDict.BillNoteStatus.toArray("value","text"),t.searchData={businStatus:""},t.infoList=[],t.listPage={pageNum:1,pageSize:10},t.changeStatus=function(){_statusPicker.show(function(e){t.$apply(function(){t.searchData.businStatus=e[0].value}),t.infoList=[],t.listPage.pageNum=1,t.queryList()})},t.queryList=function(){return n.showBar(),o.post(BTPATH.QUERY_LIST_BILL,$.extend({},t.listPage,{businStatus:t.searchData.businStatus,flag:1})).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.infoList=t.infoList.concat(o.data),t.listPage=o.page})})},t.showDetail=function(t){a.put("apply_finance_info",$.extend({},t,{type:2})),window.location.href="#/financeBusi/apply"},t.$on("$routeChangeSuccess",function(){_statusPicker=n.singleSelect(_statusList),t.queryList()})}])}},function(t,e){e.installController=function(t,e){t.controller("bill.detailController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route",function(t,n,o,i,r,a,c,r){_statusPicker={},_statusList=BTDict.AcceptFinanceFlag.toArray("value","text"),t.info={},t.upLoadList=[],t.queryInfo=function(n){o.post(BTPATH.QUERY_ONE_BILL,{id:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应票据信息,服务端\n返回信息:"+n.message,"错误信息")})},t.applyFinance=function(){window.location.href="#/finance/do/bill/"+t.info.id},t.applyInquiry=function(){window.location.href="#/inquiry/do/"+t.info.id},t.toInvoiceList=function(){a.put("invoiceList",t.info.invoiceList),window.location.href="#/billInvoice"},t.delUpload=function(e){t.upLoadList=ArrayPlus(t.upLoadList).delChild("id",e.id)},t.preImg=function(e){a.put("pre_upload_list",$.extend({},t.upLoadList)),window.location.href="#/preImg/"+e.id+",0"},t.linkBillUpload=function(e){o.post(BTPATH.SAVE_BILL_FILE,{id:t.info.id,fileId:e.id})},t.uploadImage=function(n){c.uploadImage(function(i){o.post(BTPATH.SAVE_PLUS_INFO,{fileTypeName:n,fileMediaId:i.serverId}).success(function(n){e.isCurrentData(n)&&(t.$apply(function(){t.upLoadList.push(n.data)}),t.linkBillUpload(n.data))})})},t.$on("$routeChangeSuccess",function(){var e=r.current.pathParams.id;t.queryInfo(e);var n=a.get("pre_upload_list");n&&(t.upLoadList=n,a.put("pre_upload_list",[]))})}])}},function(t,e){e.installController=function(t,e){t.controller("billInvoiceListController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route",function(t,n,o,i,r,a,c,r){t.info={},t.upLoadList=[],t.queryInfo=function(n){o.post(BTPATH.QUERY_ONE_BILL,{id:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应票据信息,服务端\n返回信息:"+n.message,"错误信息")})},t.preImg=function(e){a.put("pre_upload_list",$.extend({},t.upLoadList)),window.location.href="#/preImg/"+e.id+",0"},t.uploadImage=function(n){c.uploadImage(function(i){o.post(BTPATH.SAVE_PLUS_INFO,{fileTypeName:n,fileMediaId:i.serverId}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.upLoadList.push(n.data)})})})},t.$on("$routeChangeSuccess",function(){t.invoiceList=a.get("invoiceList")})}])}},function(t,e){e.installController=function(t,e){t.controller("billUploadListController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route",function(t,n,o,i,r,a,c,r){t.queryInfo=function(n){o.post(BTPATH.QUERY_BILL_FILE,{id:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.billFileInfo=n.data}):mui.alert("未查询到对应票据信息,服务端\n返回信息:"+n.message,"错误信息")})},t.preImg=function(e){a.put("pre_upload_list",$.extend({},t.upLoadList)),window.location.href="#/preImg/"+e.id},t.uploadImage=function(n){c.uploadImage(function(i){o.post(BTPATH.SAVE_PLUS_INFO,{fileTypeName:n,fileMediaId:i.serverId}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.upLoadList.push(n.data)})})})},t.$on("$routeChangeSuccess",function(){var e=r.current.pathParams.id;t.queryInfo(e)})}])}},function(t,e){e.installController=function(t,e){t.controller("recieveController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){_statusPicker={},_statusList=BTDict.ReceivableNoteStatus.toArray("value","text"),t.searchData={businStatus:_statusList[2].value},t.infoList=[],t.listPage={pageNum:1,pageSize:10},t.changeStatus=function(){_statusPicker.show(function(e){t.$apply(function(){t.searchData.businStatus=e[0].value}),t.infoList=[],t.listPage.pageNum=1,t.queryList()})},t.selectedItem=function(t){t.isChecked=!t.isChecked},t.queryList=function(){return n.showBar(),o.post(BTPATH.QUERY_RECEIVABLEDO_WECHAT_QUERYRECEIVABLEDO,$.extend({},t.listPage,{businStatus:t.searchData.businStatus,flag:1,isCust:!0})).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.infoList=t.infoList.concat(o.data),t.listPage=o.page})})},t.applyFinance=function(){var n=ArrayPlus(t.infoList).objectChildFilter("isChecked",!0);if(0==n.length)return void mui.alert("请选择应付账款！");var i=ArrayPlus(n).extractChildArray("id",!1),r=i[i.length-1];o.post(BTPATH.SAVE_RECEIVABLE_REQUEST_SAVEADDREQUESTTOTAL,{receivableId:r}).success(function(t){e.isCurrentData(t)&&(a.put("apply_finance_info",t.data),window.location.href="#/model/financeApply/"+t.data.requestNo)})},t.showDetail=function(t){a.put("recievInfo",t),window.location.href="#/recieve/detail/unFi/"+t.id},t.$on("$routeChangeSuccess",function(){_statusPicker=n.singleSelect(_statusList),t.queryList()})}])}},function(t,e){e.installController=function(t,e){t.controller("recieve.detailUnController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route","$location",function(t,n,o,i,r,a,c,r,u){t.info={},t.applyFinance=function(){o.post(BTPATH.SAVE_RECEIVABLE_REQUEST_SAVEADDREQUESTTOTAL,{receivableId:t.info.id}).success(function(t){e.isCurrentData(t)&&(a.put("apply_finance_info",t.data),window.location.href="#/model/financeApply/"+t.data.requestNo)})},t.showDetail=function(){u.path("/model/financeDetail/"+t.info.refNo+"/"+t.info.version)},t.$on("$routeChangeSuccess",function(){t.info=a.get("recievInfo")?a.get("recievInfo"):{}})}])}},function(t,e){e.installController=function(t,e){t.controller("recieve.detailDidController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route",function(t,n,o,i,r,a,c,r){_statusPicker={},_statusList=BTDict.AcceptFinanceFlag.toArray("value","text"),t.info={},t.upLoadList=[],t.queryInfo=function(n){o.post(BTPATH.QUERY_ONE_BILL,{id:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应票据信息,服务端\n返回信息:"+n.message,"错误信息")})},t.applyFinance=function(){window.location.href="#/finance/do/bill/"+t.info.id},t.applyInquiry=function(){window.location.href="#/inquiry/do/"+t.info.id},t.toInvoiceList=function(){a.put("invoiceList",t.info.invoiceList),window.location.href="#/billInvoice"},t.delUpload=function(e){t.upLoadList=ArrayPlus(t.upLoadList).delChild("id",e.id)},t.preImg=function(e){a.put("pre_upload_list",$.extend({},t.upLoadList)),window.location.href="#/preImg/"+e.id+",0"},t.linkBillUpload=function(e){o.post(BTPATH.SAVE_BILL_FILE,{id:t.info.id,fileId:e.id})},t.uploadImage=function(n){c.uploadImage(function(i){o.post(BTPATH.SAVE_PLUS_INFO,{fileTypeName:n,fileMediaId:i.serverId}).success(function(n){e.isCurrentData(n)&&(t.$apply(function(){t.upLoadList.push(n.data)}),t.linkBillUpload(n.data))})})},t.$on("$routeChangeSuccess",function(){var e=r.current.pathParams.id;t.queryInfo(e);var n=a.get("pre_upload_list");n&&(t.upLoadList=n,a.put("pre_upload_list",[]))})}])}},function(t,e){e.installController=function(t,e){t.controller("billPoolController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){_statusPicker={},_statusList=BTDict.BillNoteStatus.toArray("value","text"),t.searchData={businStatus:""},t.infoList=[],t.listPage={pageNum:1,pageSize:10},t.changeStatus=function(){_statusPicker.show(function(e){t.$apply(function(){console.log(111),console.log(e),t.searchData.businStatus=e[0].value}),t.infoList=[],t.listPage.pageNum=1,t.queryList()})},t.selectedItem=function(t){t.isChecked=!t.isChecked},t.applyFinance=function(){var e=ArrayPlus(t.infoList).objectChildFilter("isChecked",!0);if(0==e.length)return void mui.alert("请选择票据！");var n=ArrayPlus(e).extractChildArray("id",!0);a.put("apply_finance_info",{type:"2",id:n}),window.location.href="#/financeBusi/apply"},t.applyInquiry=function(){var e=ArrayPlus(t.infoList).objectChildFilter("isChecked",!0);if(0==e.length)return void mui.alert("请选择票据！");if(e.length>1)return void mui.alert("只能选择单张票据！");var n=ArrayPlus(e).extractChildArray("id",!0);window.location.href="#/inquiry/do/"+n},t.queryList=function(){return n.showBar(),o.post(BTPATH.QUERY_LIST_BILL,$.extend({},t.listPage,{businStatus:t.searchData.businStatus,flag:1})).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.infoList=t.infoList.concat(o.data),t.listPage=o.page})})},t.showDetail=function(t){t.businStatus+""=="0"||t.businStatus+""=="1"?window.location.href="#/billPool/detail/unFi/"+t.id:window.location.href="#/billPool/detail/didFi/"+t.id},t.$on("$routeChangeSuccess",function(){_statusPicker=n.singleSelect(_statusList),t.queryList()})}])}},function(t,e){e.installController=function(t,e){t.controller("billPool.detailUnController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route",function(t,n,o,i,r,a,c,r){_statusPicker={},_statusList=BTDict.AcceptFinanceFlag.toArray("value","text"),t.info={},t.upLoadList=[{fileInfoType:"billAccessory"}],t.queryInfo=function(n){o.post(BTPATH.QUERY_ONE_BILL,{id:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应票据信息,服务端\n返回信息:"+n.message,"错误信息")})},t.applyFinance=function(){a.put("apply_finance_info",{type:"2",id:t.info.id}),window.location.href="#/financeBusi/apply"},t.applyInquiry=function(){window.location.href="#/inquiry/do/"+t.info.id},t.toInvoiceList=function(){a.put("invoiceList",t.info.invoiceList),window.location.href="#/billInvoice"},t.linkBillUpload=function(e){o.post(BTPATH.SAVE_BILL_FILE,{id:t.info.id,fileId:e.id})},t.uploadImage=function(){c.uploadImage(function(n){o.post(BTPATH.SAVE_WECHAT_BILL_FILE,{billId:t.info.id,fileTypeName:"billAccessory",fileMediaId:n.serverId}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){var e=t.upLoadList.length;t.upLoadList[e-1]=n.data,t.upLoadList.push({fileInfoType:"billAccessory"})})})},!0)},t.delUpload=function(n){o.post(BTPATH.DELETE_SINGLE_FILE,{fileId:n.id}).success(function(o){e.isCurrentResponse(o)?t.$apply(function(){t.upLoadList=ArrayPlus(t.upLoadList).delChild("id",n.id)}):mui.alert("删除失败,服务端\n返回信息:"+o.message,"错误信息")})},t.preImg=function(e){a.put("bill_list",t.upLoadList),a.put("bill_info",$.extend({preImg:!0},t.info)),window.location.href="#/preImg/"+e.id},t.$on("$routeChangeSuccess",function(){var e=r.current.pathParams.id;t.queryInfo(e);var n=a.get("bill_info"),o=a.get("bill_list");n&&n.preImg&&(t.upLoadList=o,t.info=n,a.put("bill_list",[]),a.put("bill_info",{})),t.queryBillFileList(e)}),t.queryBillFileList=function(n){o.post(BTPATH.QUERY_BILL_FILE,{id:n}).success(function(n){e.isCurrentData(n)?t.$apply(function(){t.upLoadList=n.data,t.upLoadList.push({fileInfoType:"billAccessory"})}):mui.alert("未查询到对应票据信息,服务端\n返回信息:"+n.message,"错误信息")})}}])}},function(t,e){e.installController=function(t,e){t.controller("billPool.detailDidController",["$scope","$location","muiSupport","http","$rootScope","$route","cache","wx","$route",function(t,n,o,i,r,a,c,u,a){_statusPicker={},_statusList=BTDict.AcceptFinanceFlag.toArray("value","text"),t.info={},t.upLoadList=[{fileInfoType:"billAccessory"}],t.goDidFlow=function(){n.path("/financeBusi/detail/{{item.requestNo}}")},t.queryInfo=function(n){i.post(BTPATH.QUERY_ONE_BILL,{id:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应票据信息,服务端\n返回信息:"+n.message,"错误信息")})},t.applyFinance=function(){window.location.href="#/finance/do/bill/"+t.info.id},t.applyInquiry=function(){window.location.href="#/inquiry/do/"+t.info.id},t.toInvoiceList=function(){c.put("invoiceList",t.info.invoiceList),window.location.href="#/billInvoice"},t.linkBillUpload=function(e){i.post(BTPATH.SAVE_BILL_FILE,{id:t.info.id,fileId:e.id})},t.uploadImage=function(){u.uploadImage(function(n){i.post(BTPATH.SAVE_WECHAT_BILL_FILE,{billId:t.info.id,fileTypeName:"billAccessory",fileMediaId:n.serverId}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){var e=t.upLoadList.length;t.upLoadList[e-1]=n.data,t.upLoadList.push({fileInfoType:"billAccessory"})})})},!0)},t.delUpload=function(n){i.post(BTPATH.DELETE_SINGLE_FILE,{fileId:n.id}).success(function(o){e.isCurrentResponse(o)?t.$apply(function(){t.upLoadList=ArrayPlus(t.upLoadList).delChild("id",n.id)}):mui.alert("删除失败,服务端\n返回信息:"+o.message,"错误信息")})},t.preImg=function(e){c.put("bill_list",t.upLoadList),c.put("bill_info",$.extend({preImg:!0},t.info)),window.location.href="#/preImg/"+e.id},t.$on("$routeChangeSuccess",function(){var e=a.current.pathParams.id;t.queryInfo(e);var n=c.get("bill_info"),o=c.get("bill_list");n&&n.preImg&&(t.upLoadList=o,t.info=n,c.put("bill_list",[]),c.put("bill_info",{})),t.queryBillFileList(e)}),t.queryBillFileList=function(n){i.post(BTPATH.QUERY_BILL_FILE,{id:n}).success(function(n){e.isCurrentData(n)?t.$apply(function(){t.upLoadList=n.data,t.upLoadList.push({fileInfoType:"billAccessory"})}):mui.alert("未查询到对应票据信息,服务端\n返回信息:"+n.message,"错误信息")})}}])}},function(t,e){e.installController=function(t,e){t.controller("productController",["$scope","muiSupport","http","$rootScope","commonService",function(t,n,o,i,r){_productPicker={},t.productSelect=[],t.searchData={productId:""},t.info={},t.changeProduct=function(){_productPicker.show(function(e){t.$apply(function(){t.searchData.productId=e[0].value}),t.queryInfo()})},t.queryInfo=function(){n.showBar(),o.post(BTPATH.QUERY_INFO_PRODUCT,{productId:t.searchData.productId}).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.info=o.data})})},t.$on("$routeChangeSuccess",function(){r.queryBaseInfoList(BTPATH.QUERY_PRODUCT_SELECT_LIST,{},t,"productSelect","ProductSelectDic").success(function(){t.productSelect=BTDict.ProductSelectDic.toArray("value","text"),_productPicker=n.singleSelect(t.productSelect),t.$apply(function(){t.searchData.productId=t.productSelect.length>0?t.productSelect[0].value:""}),t.queryInfo()})})}])}},function(t,e){e.installController=function(t,e){t.controller("signController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){t.searchData={businStatus:""},t.infoList=[],t.listPage={pageNum:1,pageSize:10},t.changeStatus=function(){_statusPicker.show(function(e){t.$apply(function(){t.searchData.businStatus=e[0].value}),t.infoList=[],t.listPage.pageNum=1,t.queryList()})},t.queryList=function(){return n.showBar(),o.post(BTPATH.QUERY_LIST_ELECAGREEMENT,$.extend({},t.listPage,{flag:1})).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.infoList=t.infoList.concat(o.data),t.listPage=o.page})})},t.agreementSubList=[],t.showDetail=function(n){console.log(n),"0"===n.signStatus?window.location.href="#/sign/do/"+n.appNo:"2"===n.signStatus?(o.post(BTPATH.FIND_ELECAGREEMENTINFO,{appNo:n.appNo}).success(function(o){e.isCurrentData(o)?t.$apply(function(){t.agreementSubList=o.data.stubInfos;for(var e=t.agreementSubList.length-1;e>=0;e--)if(n.supplierNo==t.agreementSubList[e].custNo&&"0"==t.agreementSubList[e].operStatus)return void(window.location.href="#/sign/do/"+n.appNo)}):window.location.href="#/sign/detail/"+n.appNo}),window.location.href="#/sign/detail/"+n.appNo):window.location.href="#/sign/detail/"+n.appNo},t.$on("$routeChangeSuccess",function(){t.queryList()})}])}},function(t,e){e.installController=function(t,e){t.controller("sign.detailController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route",function(t,n,o,i,r,a,c,r){t.info={},t.queryInfo=function(n){o.post(BTPATH.QUERY_CONTRACT_DetailInfo,{appNo:n}).success(function(o){e.isCurrentResponse(o)?t.$apply(function(){t.contractInfo=c.previewContractImg(!0,n,o.data.data)}):mui.alert("未查询到对应详细信息,返回信息:\n"+o.message,"错误信息")}),o.post(BTPATH.FIND_ELECAGREEMENTINFO,{appNo:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应合同信息,服务端\n返回信息:"+n.message,"错误信息")})},t.showAllImage=function(){c.previewContractImg(!1,t.contractInfo)},t.skipSign=function(){a.put("stubInfos",t.info.stubInfos),window.location.href="#/sign/record"},t.$on("$routeChangeSuccess",function(){var e=r.current.pathParams.id;t.queryInfo(e)})}])}},function(t,e){e.installController=function(t,e){t.controller("sign.recodeController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route","$rootScope",function(t,e,n,o,i,r,a,i,o){t.infoList={},t.$on("$routeChangeSuccess",function(){t.infoList=r.get("stubInfos")})}])}},function(t,e){e.installController=function(t,e){t.controller("sign.doController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route",function(t,n,o,i,r,a,c,r){t.info={},t.vCode="",t.tradePwd="",t.queryInfo=function(n){o.post(BTPATH.QUERY_CONTRACT_DetailInfo,{appNo:n}).success(function(o){e.isCurrentResponse(o)?t.$apply(function(){
t.contractInfo=c.previewContractImg(!0,n,o.data.data)}):mui.alert("未查询到对应详细信息,返回信息:\n"+o.message,"错误信息")}),o.post(BTPATH.FIND_ELECAGREEMENTINFO,{appNo:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应合同信息,返回信息:\n"+n.message,"错误信息")})},t.showAllImage=function(){c.previewContractImg(!1,t.contractInfo)},t.findValidCode=function(n,i){o.post(BTPATH.FIND_VALIDCODE,{appNo:n,custType:i}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("获取验证码失败,返回信息:\n"+n.message,"错误信息")})},t.sendValidCode=function(e,n){o.post(BTPATH.SEND_VALIDCODE_SENDVALIDCODE,{appNo:t.info.appNo,vCode:t.vCode,custType:"0"}).success(function(t){200==t.code||"200"==t.code?(window.location.href="#/sign/",mui.alert("签约成功！","温馨提示")):mui.alert("验证码错误,返回信息:\n"+t.message,"错误信息")})},t.cancelElecAgreement=function(n,i){o.post(BTPATH.CANCELELECAGREEMENT,{appNo:n,describe:i}).success(function(n){e.isCurrentResponse(n)?(t.$apply(function(){t.info=n.data}),window.location.href="#/sign/",mui.alert("已放弃签署！","温馨提示")):mui.alert("错误,返回信息:\n"+n.message,"错误信息")})},t.$on("$routeChangeSuccess",function(){var e=r.current.pathParams.appNo;t.queryInfo(e)})}])}},function(t,e){e.installController=function(t,e){t.controller("financeApplyCtrl",["$scope","muiSupport","http","$rootScope","$route","cache","commonService","$routeParams","wx",function(t,n,o,i,r,a,c,u,s){function l(t,e,n){for(var o=[],i=0,r=t.length;i<r;i++){var a=t[i];o.push({value:a[e],text:a[n]})}return o}function f(t){var e=document.getElementById(t).value.trim();if(0==e.length)return void mui.alert("请选择期望付款日期")}t.beginPicker={},_statusPicker={},_factorPicker={},_accountPicker={},_statusList=BTDict.BillNoteStatus.toArray("value","text"),t.searchData={},t.info={},t.pageInfo={},t.pageInfo.assetType={},t.factorProList=[],t.infoList=[],t.agreeUploadList=[{fileInfoType:"agreeAccessory"}],t.invoiceUploadList=[{fileInfoType:"invoiceFile"}],t.listPage={pageNum:1,pageSize:10},t.changeDate=function(e){t.datePicker.show(function(e){t.$apply(function(){t.info.requestPayDate=e.text})})},t.changeFac=function(){_factorPicker.show(function(e){t.covertProductToRequest(e[0])})},t.changeAccount=function(){_accountPicker.show(function(e){t.$apply(function(){t.info.custBankAccount=e[0].value,t.info.custBankName=e[0].text.split("-")[1],t.refreshBankList(t.info.custBankAccount)})})},t.refreshBankList=function(n){o.post(BTPATH.SAVE_RECEIVABLE_REQUEST_SAVESUBMITREQUESTTOTAL,{bankAcco:n}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.info.custBankAccountName=n.data.bankAccoName,t.info.custBankName=n.data.bankName})})},t.submit=function(){if(f("ipt"),t.pageInfo.assetType&&t.pageInfo.assetType[3]&&1==t.agreeUploadList.length)return void mui.alert("请上传合同附件");if(t.pageInfo.assetType&&t.pageInfo.assetType[4]&&1==t.invoiceUploadList.length)return void mui.alert("请上传发票附件");var n=ArrayPlus(t.agreeUploadList).extractChildArray("id",!0),i=ArrayPlus(t.invoiceUploadList).extractChildArray("id",!0);o.post(BTPATH.SAVE_RECEIVABLE_REQUEST_SAVESUBMITREQUESTTOTAL,$.extend({},t.info,{wechaMarker:"1",requestProductCode:t.info.productCode,goodsBatchNo:n,statementBatchNo:i})).success(function(t){e.isCurrentData(t)?window.location.href="#/sign":mui.alert("申请失败,请联系客服人员,服务端\n返回信息:"+t.message,"错误信息")})};var p={agree:{upload_path:BTPATH.SAVE_REHISTERPLUS_INFO,fileInfoType:"agreeAccessory",listName:"agreeUploadList"},invoice:{upload_path:BTPATH.SAVE_REHISTERPLUS_INFO,fileInfoType:"invoiceFile",listName:"invoiceUploadList"}};t.uploadImage=function(n){var i=p[n];s.uploadImage(function(n){o.post(i.upload_path,{fileTypeName:i.fileInfoType,fileMediaId:n.serverId}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){var e=t[i.listName].length;t[i.listName][e-1]=n.data,t[i.listName].push({fileInfoType:i.fileInfoType})})})},!0)},t.delUpload=function(e,n){var o=p[n];t[o.listName]=ArrayPlus(t[o.listName]).delChild("id",e.id)},t.preImg=function(e){a.put("agree_upload_list",t.agreeUploadList),a.put("invoice_upload_list",t.invoiceUploadList),a.put("finance_apply_info",$.extend({preImg:!0},t.info)),window.location.href="#/preImg/"+e.id},t.f={},t.covertProductToRequest=function(e){for(var n=0,o=t.factorProList.length;n<o;n++)t.factorProList[n].productCode==e.value&&t.$apply(function(){t.info.productName=t.factorProList[n].productName,t.info.productCode=t.factorProList[n].productCode,t.info.factoryName=t.factorProList[n].factoryName,t.info.receivableRequestType=t.factorProList[n].receivableRequestType});t.queryAssectType(t.info.productCode)},t.queryAssectType=function(n){t.pageInfo.assetType={},o.post(BTPATH.FIND_COREPRODUCTCUST_FINDASSETDICTBYPRODUCT,{productCode:n}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){angular.forEach(n.data,function(e){t.pageInfo.assetType[e.dictType]=!0})})})},t.$on("$routeChangeSuccess",function(){var i=u.id;o.post(BTPATH.FIND_RECEIVABLE_REQUEST_FINDONEYBYREQUESTNO,{requestNo:i}).success(function(o){e.isCurrentResponse(o)?t.$apply(function(){t.info=o.data,c.queryBaseInfoList(BTPATH.QUERY_COREPRODUCTCUST_QUERYCANUSEPRODUCT,{custNo:t.info.custNo,coreCustNo:t.info.coreCustNo},t,"factorProList").success(function(){t.f=l(t.factorProList,"productCode","productName"),t.covertProductToRequest(t.f[0]),_factorPicker=n.singleSelect(t.f)}),c.queryBaseInfoList(BTPATH.QUERY_ACCOUNT_QUERYACCOUNTKEYANDVALUE,{custNo:t.info.custNo},t,"accountList").success(function(){t.accountList=l(t.accountList,"value","name"),_accountPicker=n.singleSelect(t.accountList),t.$apply(function(){t.info.custBankAccount=t.accountList?t.accountList[0].value:"",t.info.custBankName=t.accountList?t.accountList[0].text.split("-")[1]:"",t.refreshBankList(t.info.custBankAccount)})})}):mui.alert("未查询到对应信息,服务端\n返回信息:"+o.message,"错误信息")}),t.datePicker=n.dateSelect({type:"date"})})}])}},function(t,e){e.installController=function(t){t.controller("financeDetailCtrl",["$scope","$location","muiSupport","$routeParams","http","commonService",function(t,e,n,o,i,r){t.info={},t.info.asset={},t.agreeUploadList=[{fileInfoType:"agreeAccessory"}],t.invoiceUploadList=[{fileInfoType:"invoiceFile"}],t.preImg=function(t){window.location.href="#/preImg/"+t.id},t.$on("$routeChangeSuccess",function(){var e=o.id,n=o.version;console.log(12345),console.log(e),i.post(BTPATH.FIND_RECEIVABLE_REQUEST_FINDREQUESTBYRECEIVABLEID,{refNo:e,version:n}).success(function(e){t.$apply(function(){t.info=e.data,t.info.asset.goodsBatchNo&&r.queryBaseInfoList(BTPATH.FIND_CUSTFILE_FILELIEBYBATCHNO,{batchNo:t.info.asset.goodsBatchNo},t,"agreeUploadList"),t.info.asset.statementBatchNo&&r.queryBaseInfoList(BTPATH.FIND_CUSTFILE_FILELIEBYBATCHNO,{batchNo:t.info.asset.statementBatchNo},t,"invoiceUploadList")})})})}])}},function(t,e){e.installController=function(t,e){t.controller("financeController",["$scope","muiSupport","http","$rootScope","cache",function(t,n,o,i,r){_statusPicker={},_statusList=BTDict.FinanceReqStatus.toArray("value","text"),t.searchData={businStatus:""},t.infoList=[],t.listPage={pageNum:1,pageSize:10},t.changeStatus=function(){_statusPicker.show(function(e){t.$apply(function(){t.searchData.businStatus=e[0].value}),t.infoList=[],t.listPage.pageNum=1,t.queryList()})},t.queryList=function(){return n.showBar(),o.post(BTPATH.QUERY_LIST_FINANCE,$.extend(t.listPage,{tradeStatus:t.searchData.businStatus,flag:1})).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.infoList=o.data,t.listPage=o.page})})},t.showDetail=function(t){window.location.href="#/finance/detail/finance/"+t.request.requestNo},t.$on("$routeChangeSuccess",function(){_statusPicker=n.singleSelect(_statusList),t.queryList()})}])}},function(t,e){e.installController=function(t,e){t.controller("finance.detailController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){_statusPicker={},_statusList=BTDict.AcceptFinanceFlag.toArray("value","text"),t.searchData={financeFlag:""},t.info={},t.listPage={pageNum:1,pageSize:10},t.uploadList=[],t.queryInfo=function(n,i){var r="",a={};return"bill"===n?(r=BTPATH.QUERY_ONE_FINANCE_BYBILLID,a={billId:i}):(r=BTPATH.QUERY_ONE_FINANCE_BYNO,a={requestNo:i}),o.post(r,a).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应融资信息,服务端\n返回信息:"+n.message,"错误信息")})},t.preImg=function(e){a.put("pre_upload_list",$.extend({},t.upLoadList)),window.location.href="#/preImg/"+e.id+",0"},t.queryFinanceUploadList=function(){o.post(BTPATH.QUERY_UPLOAD_LIST,{batchNo:t.info.request.batchNo}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.upLoadList=n.data})})},t.$on("$routeChangeSuccess",function(){var e=r.current.pathParams.id,n=r.current.pathParams.type;t.queryInfo(n,e).success(function(){t.queryFinanceUploadList()})})}])}},function(t,e){e.installController=function(t,e){t.controller("finance.successController",["$scope","muiSupport","http","$rootScope","cache","wx",function(t,e,n,o,i,r){t.toHome=function(){window.location.href=BTServerPath+"/Wechat/wxRequest/toHome"},t.$on("$routeChangeSuccess",function(){})}])}},function(t,e){e.installController=function(t,e){t.controller("finance.applyController",["$scope","muiSupport","http","cache","$route","commonService","wx",function(t,n,o,i,r,a,c){_factorPicker={},t.info={},t.request={},t.offer={},t.enquiryObject={},t.upLoadList=[],t.factorList=[],t.queryOfferInfo=function(n,i){return o.post(BTPATH.FIND_OFFER_DETAIL,{enquiryNo:n,factorNo:i}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.offer=n.data,t.info=n.data.enquiry.order,t.info.loanBalalce=n.data.enquiry.balance,t.info.ratio=n.data.ratio,t.info.offerId=n.data.id,t.request.factorNo=n.data.factorNo,t.request.balance=n.data.enquiry.balance}):mui.alert("未查询到对应报价信息,服务端\n返回信息:"+n.message,"错误信息")})},t.queryBillInfo=function(n){return o.post(BTPATH.QUERY_ONE_BILL,{id:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应票据信息,服务端\n返回信息:"+n.message,"错误信息")})},t.queryFactor=function(){return o.post().success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.factorList=n.data}):mui.alert("未查询到对应保理公司信息,服务端\n返回信息:"+n.message,"错误信息")})},t.delUpload=function(e){t.upLoadList=ArrayPlus(t.upLoadList).delChild("id",e.id)},t.preImg=function(e){i.put("pre_upload_list",$.extend({},t.upLoadList)),window.location.href="#/preImg/"+e.id+",0"},t.uploadImage=function(n){c.uploadImage(function(i){o.post(BTPATH.SAVE_PLUS_INFO,{fileTypeName:n,fileMediaId:i.serverId}).success(function(n){e.isCurrentData(n)&&(t.$apply(function(){t.upLoadList.push(n.data)}),t.linkApplyUpload(n.data))})})},t.applyFinance=function(){t.request.orders=t.info.id,t.request.requestFrom=2,t.request.coreCustNo=t.info.coreCustNo,t.request.requestType=2,t.request.offerId=t.offer.id,t.info.fileList=ArrayPlus(t.upLoadList).extractChildArray("id",!0),o.post(BTPATH.APPLY_FINANCE,t.request).success(function(t){e.isCurrentResponse(t)?mui.alert("申请成功,点击确定返回票据列表","温馨提示",function(){window.location.href="#/bill"}):mui.alert("申请失败,请联系客服人员,服务端\n返回信息:"+t.message,"错误信息")})},t.changeFactorNo=function(){t.isCanChangeFactor&&_factorPicker.show(function(e){t.$apply(function(){t.request.factorNo=e[0].value})})},t.$on("$routeChangeSuccess",function(){var o=r.current.pathParams.type,c=r.current.pathParams.id,u={};t.isCanChangeFactor="offer"!==o,a.queryBaseInfoList(BTPATH.CUST_RELATION,{},t,"factorList","FactorListDic").success(function(){if(t.factorList=BTDict.FactorListDic.toArray("value","text"),"offer"!==o&&t.$apply(function(){t.request.factorNo=e.filterArrayFirst(t.factorList)}),_factorPicker=n.singleSelect(t.factorList),"offer"===o){var i=c.split(","),r=i[0],a=i[1];u=t.queryOfferInfo(r,a)}else u=t.queryBillInfo(c)});var s=i.get("pre_upload_list");s&&(t.upLoadList=s,i.put("pre_upload_list",[]))})}])}},function(t,e){e.installController=function(t,e){t.controller("accountController",["$scope","muiSupport","http","$rootScope","cache","wx",function(t,n,o,i,r,a){_coreCustPicker={},_coreCustList=BTDict.ScfCoreGroup.toArray("value","text"),t.info={coreCustNo:_coreCustList[0].value},t.upLoadList=[],t.changeCoreCust=function(){_coreCustPicker.show(function(e){t.$apply(function(){t.info.coreCustNo=e[0].value})})},t.openAccount=function(){t.info.fileList=ArrayPlus(t.upLoadList).extractChildArray("id",!0),o.post(BTPATH.OPEN_ACCOUNT,t.info).success(function(t){e.isCurrentResponse(t)?mui.alert("您已经开户成功,点击确认开始融资吧!","温馨提示",function(){window.location.href=BTServerPath+"/Wechat/Platform/toHome"}):mui.alert("申请失败,请联系客服人员,服务端\n返回信息:"+t.message,"错误信息")})},t.delUpload=function(e){t.upLoadList=ArrayPlus(t.upLoadList).delChild("id",e.id)},t.preImg=function(e){r.put("pre_upload_list",t.upLoadList),r.put("account_info",t.info),window.location.href="#/preImg/"+e.id+",1"},t.uploadImage=function(n){a.uploadImage(function(i){o.post(BTPATH.SAVE_REHISTERPLUS_INFO,{fileTypeName:n,fileMediaId:i.serverId}).success(function(n){console.log(n),e.isCurrentData(n)&&t.$apply(function(){t.upLoadList.push(n.data)})})},!0)},t.$on("$routeChangeSuccess",function(){_coreCustPicker=n.singleSelect(_coreCustList);var e=r.get("pre_upload_list"),o=r.get("account_info");e&&o&&(t.upLoadList=e,t.info=o,r.put("pre_upload_list",[]),r.put("account_info",{}))})}])}},function(t,e){e.installController=function(t,e){t.controller("account.successController",["$scope","muiSupport","http","$rootScope","cache","wx",function(t,e,n,o,i,r){t.toHome=function(){window.location.href=BTServerPath+"/Wechat/wxRequest/toHome"},t.$on("$routeChangeSuccess",function(){})}])}},function(t,e){e.installController=function(t,e){t.controller("account.detailController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){_statusPicker={},_statusList=BTDict.AcceptFinanceFlag.toArray("value","text"),t.searchData={financeFlag:""},t.info={},t.listPage={pageNum:1,pageSize:10},t.uploadList=[],t.queryInfo=function(){return o.post(BTPATH.QUERY_INFO_ACCOUNT,{}).success(function(n){e.isCurrentData(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到您的账户信息,服务端\n返回信息:"+n.message,"错误信息")})},t.preImg=function(e){a.put("pre_upload_list",$.extend({},t.upLoadList)),window.location.href="#/preImg/"+e.id+",0"},t.queryFinanceUploadList=function(){o.post(BTPATH.QUERY_UPLOAD_LIST,{batchNo:t.info.batchNo}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.upLoadList=n.data})})},t.$on("$routeChangeSuccess",function(){t.queryInfo().success(function(){t.queryFinanceUploadList()})})}])}},function(t,e){e.installController=function(t,e){t.controller("account.factorController",["$scope","muiSupport","http","$rootScope","cache","wx",function(t,n,o,i,r,a){t.factorList=[],t.custInfo={},t.addFactorArr=[],t.readAndAgree=!0,t.queryFactorOpened=function(){t.factorList=BTDict.ScfFactorGroup.toArray("value","name"),o.post(BTPATH.QUERY_OPENED_FACTOR,{custNo:t.custInfo.custNo}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.factorList=ArrayPlus(t.factorList).setKeyArrayObj("businStatus",0);for(var e=t.factorList,o=0;o<n.data.length;o++){var i=n.data[o];e=ArrayPlus(e).setKeyArrayObj("businStatus",i.businStatus,"value",i.relateCustno+""),e=ArrayPlus(e).setKeyArrayObj("isChecked",!0,"value",i.relateCustno+"")}t.factorList=e})})},t.queryCustInfo=function(){return o.post(BTPATH.QUERY_CUST_INFO).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.custInfo=n.data}):mui.alert("未查询到公司信息,服务端\n返回信息:"+n.message,"错误信息")})},t.openAccount=function(){if(!t.readAndAgree)return mui.alert("网上交易协议未同意！","温馨提示"),!1;var n=t.addFactorArr.join(",");return n&&0!=n.length?void o.post(BTPATH.SAVE_FACTOR_RELATION,{custNo:t.custInfo.custNo,factorList:n}).success(function(t){e.isCurrentResponse(t)?(window.location.href="#/home",mui.alert("保理业务已受理,请等待审核!","温馨提示")):mui.alert("申请失败,请联系客服人员,服务端\n返回信息:"+t.message,"错误信息")}):(mui.alert("请选择保理公司！","温馨提示"),!1)},t.toggleCheckItem=function(e){0!=e.businStatus&&4!=e.businStatus||(e.isChecked=!e.isChecked,e.isChecked?t.addFactorArr.push(e.value):t.addFactorArr=ArrayPlus(t.addFactorArr).remove(e.value))},t.$on("$routeChangeSuccess",function(){t.readAndAgree=!0,t.factorList=[],t.queryCustInfo().success(function(){t.queryFactorOpened()})})}])}},function(t,e){e.installController=function(t,e){t.controller("account.succeController",["$scope","muiSupport","http","$rootScope","cache",function(t,n,o,i,r){t.openBusin=function(){window.location.href="#/home/finance"},t.$on("$routeChangeSuccess",function(){o.post(BTPATH.FIND_SUCCESS_OPEN_ACCOUNT_TMP,{}).success(function(n){e.isCurrentResponse(n)&&(t.$apply(function(){t.info=n.data}),r.put("account_info",t.info))})})}])}},function(t,e){e.installController=function(t,e){t.controller("account.bindController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){t.info={password:""},t.checkPwd=function(){o.post(BTPATH.CHECK_FRISTLOGIN_TRADEPASS,{tradePassword:t.info.password}).success(function(t){e.isCurrentResponse(t)?window.location.href="#/register/accountSuccess":mui.alert("您输入的密码有误，请重新输入!","温馨提示!")})},t.toggleEye=function(e,n){var o=e+"."+n,i=n+"Eye";t[e][i]=!t[e][i],console&&console.info(t[e][i]);var r=document.querySelector("[ng-model='"+o+"']");r.type=t[e][i]?"text":"password"},i.typeChange=function(t){t.type="password",$(t).unbind("focus")},t.$on("$routeChangeSuccess",function(){})}])}},function(t,e){e.installController=function(t,e){t.controller("open.basicController",["$scope","muiSupport","http","$rootScope","$route","cache","commonService",function(t,n,o,i,r,a,c){_statusPicker={},t.companyTypes=BTDict.RegisterCompanyType.toArray("value","text"),t.companyTypes[0].isChecked=!0,t.info={role:t.companyTypes[0].value},t.singleToggleItem=function(e,n){t.info.role=e.value,ArrayPlus(n).setKeyArrayObj("isChecked",!1),ArrayPlus(n).setKeyArrayObj("isChecked",!0,"value",e.value)},t.identifyInfo={canSend:"true",timerMsg:""};var u;t.countDown=function(){var e=60;t.identifyInfo.canSend=!1,u=setInterval(function(){0===e?(t.$apply(function(){t.identifyInfo.canSend=!0}),clearInterval(u)):t.$apply(function(){e--,t.identifyInfo.timerMsg=e+"秒后可重新发送"})},1e3)},t.sendIdentifyCode=function(){t.countDown()},t.nextStep=function(){return t.info.custName?t.info.operName?t.info.operEmail?t.info.operMobile?void o.post(BTPATH.SAVE_OPEN_ACCOUNT,t.info).success(function(n){e.isCurrentResponse(n)?(a.put("account_info",t.info),window.location.href="#/register/upload"):mui.alert("保存失败,服务端返回信息:\n"+n.message,"错误信息")}):void mui.alert("请填写经办人手机号码","温馨提示"):void mui.alert("请填写经办人电子邮箱","温馨提示"):void mui.alert("请填写经办人姓名","温馨提示"):void mui.alert("请填写企业名称","温馨提示")},t.$on("$routeChangeSuccess",function(){o.post(BTPATH.FIND_CUST_OPEN_ACCOUNT_TMP,{}).success(function(n){e.isCurrentResponse(n)&&(t.$apply(function(){t.info=$.extend({},t.info,n.data)}),a.put("account_info",t.info))})})}])}},function(t,e){e.installController=function(t,e){t.controller("open.uploadController",["$scope","muiSupport","http","$rootScope","$route","cache","wx",function(t,n,o,i,r,a,c){function u(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}_statusPicker={},t.info={},t.upLoadList={},t.delUpload=function(n){o.post(BTPATH.DELETE_SINGLE_FILE,{id:n.id}).success(function(o){e.isCurrentResponse(o)?t.$apply(function(){t.upLoadList[o.data.fileInfoType]=o.data,t.upLoadList[n.fileInfoType]={fileInfoType:n.fileInfoType}}):mui.alert("删除失败,服务端\n返回信息:"+o.message,"错误信息")})},t.preImg=function(e){a.put("pre_upload_list",t.upLoadList),a.put("account_info",t.info),window.location.href="#/preImg/"+e.id+",1"},t.uploadImage=function(n){c.uploadImage(function(i){o.post(BTPATH.SAVE_SINGLE_ACCOUNT_FILE,{fileTypeName:n,fileMediaId:i.serverId,id:t.info.id}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.upLoadList[n.data.fileInfoType]=n.data}):mui.alert("保存失败,服务端\n返回信息:"+n.message,"错误信息")})})},t.nextStep=function(){var e=u(t.upLoadList);return t.info.fileList=ArrayPlus(e).extractChildArray("id",!0),a.put("account_info",t.info),a.put("upLoadList",t.upLoadList),t.info.fileList?void(window.location.href="#/register/passwd"):void mui.alert("请至少上传一个附件信息！","错误信息")},t.$on("$routeChangeSuccess",function(){t.info=a.get("account_info"),t.upLoadList=a.get("upLoadList"),o.post(BTPATH.FIND_CUST_OPEN_ACCOUNT_TMP,{}).success(function(n){e.isCurrentResponse(n)&&(t.$apply(function(){t.info=$.extend({},t.info,n.data)}),a.put("account_info",t.info))}),o.post(BTPATH.FIND_OPEN_ACCOUNT_FILEITEM,{batchNo:t.info.batchNo}).success(function(e){t.$apply(function(){t.upLoadList=e.data})});var n=a.get("pre_upload_list"),i=a.get("account_info");n&&i&&(t.upLoadList=n,t.info=i,a.put("pre_upload_list",[]),a.put("account_info",{}))})}])}},function(t,e){e.installController=function(t,e){t.controller("open.passwdController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){function c(){clearInterval(u),t.identifyInfo.canSend=!0,t.identifyInfo.timerMsg=""}_statusPicker={},t.info={},t.readAndAgree=!0,t.toggleEye=function(e,n){var o=e+"."+n,i=n+"Eye";t[e][i]=!t[e][i],console.info(t[e][i]);var r=document.querySelector("[ng-model='"+o+"']");r.type=t[e][i]?"text":"password"},t.accountNameValid=function(){var e=t.info.loginUserName.toLowerCase();ArrayPlus(["admin","qiejf","wechat"]).isContain(e)&&(mui.alert("登录帐号不能使用"+t.info.loginUserName+",请重新填写!","温馨提示"),t.info.loginUserName="")},t.identifyInfo={canSend:!0,timerMsg:""};var u;t.countDown=function(){var e=60;t.identifyInfo.canSend=!1,u=setInterval(function(){0===e?(t.$apply(function(){t.identifyInfo.canSend=!0}),clearInterval(u)):t.$apply(function(){e--,t.identifyInfo.timerMsg=e+"秒后可重新发送"})},1e3)},t.sendIdentifyCode=function(){o.post(BTPATH.OPEN_ACCOUNT_VERIFY_CODE,{mobileNo:t.info.operMobile}).success(function(e){e&&200===e.code&&t.countDown()})},t.openAccount=function(){return t.readAndAgree?t.info.newDealPassword&&t.info.okDealPassword?t.info.newLoginPassword&&t.info.okLoginPassword?t.info.newPassword!==t.info.okPassword?void mui.alert("两次输入的密码不一致","温馨提示"):(o.post(BTPATH.APPLY_OPEN_ACCOUNT,t.info).success(function(t){e.isCurrentResponse(t)?window.location.href="#/register/waitAudit":mui.alert("申请失败,服务端返回信息:\n"+t.message,"错误信息")}),void c()):void mui.alert("登录密码不能为空","温馨提示"):void mui.alert("交易密码不能为空","温馨提示"):void mui.alert("请阅读并同意协议","温馨提示")},t.$on("$routeChangeSuccess",function(){t.info=a.get("account_info"),$("body").scrollTop(0)})}])}},function(t,e){e.installController=function(t,e){t.controller("open.showController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){_statusPicker={},t.upLoadList={},t.info={},t.preImg=function(e){a.put("account_info",t.info),window.location.href="#/preImg/"+e.id+",1"},t.$on("$routeChangeSuccess",function(){var n=a.get("account_info");n&&(t.info=n,a.put("account_info",{})),o.post(BTPATH.QUERY_UPLOAD_LIST,{batchNo:n.batchNo}).success(function(n){if(e.isCurrentData(n)){var o=BTDict.CustOpenAccountFile.toArray("fileInfoType","name");o=ArrayPlus(o).extendObjectArray(n.data,"fileInfoType"),t.$apply(function(){t.upLoadList=ArrayPlus(o).changeObjectArray2Object("fileInfoType")})}})})}])}},function(t,e){e.installController=function(t,e){t.controller("open.waitAuditController",["$scope","muiSupport","http","$rootScope","cache",function(t,n,o,i,r){t.$on("$routeChangeSuccess",function(){o.post(BTPATH.FIND_CUST_OPEN_ACCOUNT_TMP,{}).success(function(n){e.isCurrentResponse(n)&&(t.$apply(function(){t.info=n.data}),r.put("account_info",t.info))})})}])}},function(t,e){e.installController=function(t,e){t.controller("open.waitActiveController",["$scope","muiSupport","http","$rootScope","cache",function(t,n,o,i,r){t.info={active:!1},t.readAndAgree=!0,t.activeAccount=function(n){return t.readAndAgree?void o.post(BTPATH.ACTIVE_OPEN_ACCOUNT,{id:t.info.parentId}).success(function(t){e.isCurrentResponse(t)&&(t&&200===t.code?(mui.alert("激活成功","温馨提示"),window.location.href=BTServerPath+"/Wechat/Platform/toSuccess"):(tipbar.errorTopTipbar($(n),"操作失败,服务器返回信息"+t.message,3e3,9996),mui.alert("激活失败,服务端\n返回信息:"+t.message,"错误信息")))}):void mui.alert("请阅读并同意协议","温馨提示")},t.$on("$routeChangeSuccess",function(){o.post(BTPATH.FIND_CUST_OPEN_ACCOUNT_TMP,{}).success(function(n){e.isCurrentResponse(n)&&(t.$apply(function(){t.info=n.data}),r.put("account_info",t.info))})})}])}},function(t,e){e.installController=function(t,e){t.controller("tradeContract.listController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){t.listPage={pageNum:1,pageSize:10},t.contractList=[],t.queryList=function(){t.listPage.pageNum=1,t.queryContractList(!0)},t.queryContractList=function(i){return n.showBar(),t.listPage.flag=i?1:2,o.post(BTPATH.QUERY_CONTRACT_LEDGER,$.extend({},t.listPage)).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.contractList=t.contractList.concat(o.data),i&&(t.listPage=o.page)})})},t.deleteContract=function(e){mui.confirm("确认删除贸易合同?","温馨提示","",function(n){1==n.index&&$.post(BTPATH.DELETE_CONTRACT_LEDGER,{contractId:e.id},function(n){n&&200===n.code?(t.$apply(function(){t.contractList=ArrayPlus(t.contractList).delChild("id",e.id)}),mui.toast("删除成功！"),window.location.href="#/tradeContract/list"):mui.alert("删除失败，服务端返回信息:"+n.message,"错误信息")},"json")})},t.openAdd=function(){window.location.href="#/tradeContract/add"},t.$on("$routeChangeSuccess",function(){t.queryContractList(!0)})}])}},function(t,e){e.installController=function(t,e){t.controller("tradeContract.addController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){t.beginPicker={},t.endPicker={},t.signPicker={},_coreCustPicker={},t.info={buyerNo:"",buyer:"",supplierNo:"",supplier:"",agreeStartDate:"",agreeEndDate:""},t.coreCustList=[],t.changeDate=function(e){if("begin"===e)t.beginPicker.beginShow(t,"endPicker",t.info.agreeStartDate,function(e){t.$apply(function(){t.info.agreeStartDate=e.text})});else if("end"===e)t.endPicker.endShow(t,"beginPicker",t.info.agreeEndDate,function(e){t.$apply(function(){t.info.agreeEndDate=e.text})});else if("sign"===e){var o={value:t.info.signDate,type:"date"},i=n.dateSelect(o);i.show(function(e){t.$apply(function(){t.info.signDate=e.text})})}},t.changeCore=function(){_coreCustPicker.show(function(e){t.$apply(function(){t.info.buyerNo=e[0].value,t.info.buyer=e[0].text})})},t.nextStep=function(){$.post(BTPATH.ADD_CONTRACT_LEDGER,t.info,function(t){t&&200===t.code?(mui.toast("新增成功！"),window.location.href="#/tradeContract/upload/"+t.data.id):mui.alert("新增失败，服务端返回信息:"+t.message,"错误信息")},"json")},t.$on("$routeChangeSuccess",function(){var e=n.crtLinkDate(t.info.agreeStartDate,t.info.agreeEndDate);t.beginPicker=e.begin,t.endPicker=e.end,t.findCustInfo().success(function(){t.queryCoreCustList()})}),t.findCustInfo=function(){return $.post(BTPATH.QUERY_CUST_INFO,function(n){e.isCurrentData(n)&&t.$apply(function(){t.info.supplierNo=n.data.custNo,t.info.supplier=n.data.custName})},"json")},t.queryCoreCustList=function(){return $.post(BTPATH.FIND_RELATION_CORE_CUST,{custNo:t.info.supplierNo},function(o){e.isCurrentData(o)&&t.$apply(function(){t.coreCustList=ArrayPlus(o.data).replaceChildProp("name","text",!0),_coreCustPicker=n.singleSelect(t.coreCustList)})},"json")}}])}},function(t,e){e.installController=function(t,e){t.controller("tradeContract.editController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){t.beginPicker={},t.endPicker={},t.signPicker={},_coreCustPicker={},t.info={agreeName:"",id:"",balance:"",buyerNo:"",buyer:"",supplierNo:"",supplier:"",agreeStartDate:"",agreeEndDate:""},t.coreCustList=[],t.changeDate=function(e){if("begin"===e)t.beginPicker.beginShow(t,"endPicker",t.info.agreeStartDate,function(e){t.$apply(function(){t.info.agreeStartDate=e.text})});else if("end"===e)t.endPicker.endShow(t,"beginPicker",t.info.agreeEndDate,function(e){t.$apply(function(){t.info.agreeEndDate=e.text})});else if("sign"===e){var o={value:t.info.signDate,type:"date"},i=n.dateSelect(o);i.show(function(e){t.$apply(function(){t.info.signDate=e.text})})}},t.changeCore=function(){_coreCustPicker.show(function(e){t.$apply(function(){t.info.buyerNo=e[0].value,t.info.buyer=e[0].text})})},t.queryContractInfo=function(){o.post(BTPATH.FIND_CONTRACT_LEDGER_INFO,{contractId:t.info.id}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应票据信息,服务端\n返回信息:"+n.message,"错误信息")})},t.nextStep=function(){$.post(BTPATH.SAVE_CONTRACT_LEDGER,t.info,function(t){t&&200===t.code?(mui.toast("修改成功！"),window.location.href="#/tradeContract/upload/"+t.data.id):mui.alert("修改失败，服务端返回信息:"+t.message,"错误信息")},"json")},t.$on("$routeChangeSuccess",function(){var e=n.crtLinkDate(t.info.agreeStartDate,t.info.agreeEndDate);t.beginPicker=e.begin,t.endPicker=e.end,t.info.id=r.current.pathParams.contractId,t.findCustInfo().success(function(){t.queryCoreCustList()}),t.queryContractInfo()}),t.findCustInfo=function(){return $.post(BTPATH.QUERY_CUST_INFO,function(n){e.isCurrentData(n)&&t.$apply(function(){t.info.supplierNo=n.data.custNo,t.info.supplier=n.data.custName})},"json")},t.queryCoreCustList=function(){return $.post(BTPATH.FIND_RELATION_CORE_CUST,{custNo:t.info.supplierNo},function(o){e.isCurrentData(o)&&t.$apply(function(){t.coreCustList=ArrayPlus(o.data).replaceChildProp("name","text",!0),_coreCustPicker=n.singleSelect(t.coreCustList)})},"json")}}])}},function(t,e){e.installController=function(t,e){t.controller("tradeContract.infoController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route",function(t,n,o,i,r,a,c,r){t.info={};var u={detail:"",audit:"审核生效",cancel:"取消审核",disuse:"作废"};t.actionInfo={actionType:"",message:""},t.queryInfo=function(n){o.post(BTPATH.FIND_CONTRACT_LEDGER_INFO,{contractId:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应票据信息,服务端\n返回信息:"+n.message,"错误信息")})},t.audit=function(){$.post(BTPATH.SAVE_CONTRACT_LEDGER_STATUS,{contractId:t.info.id,status:"1"},function(t){t&&200===t.code?mui.toast("审核成功！"):mui.alert("审核失败，服务端返回信息:"+t.message,"错误信息")},"json")},t.cancelAudit=function(){mui.confirm("确定要取消审核吗?","温馨提示","",function(e){1==e.index&&$.post(BTPATH.SAVE_CONTRACT_LEDGER_STATUS,{contractId:t.info.id,status:"0"},function(t){t&&200===t.code?mui.toast("取消审核成功！"):mui.alert("取消审核失败，服务端返回信息:"+t.message,"错误信息")},"json")})},t.disuse=function(){mui.confirm("确定要作废合同吗?","温馨提示","",function(e){1==e.index&&$.post(BTPATH.SAVE_CONTRACT_LEDGER_STATUS,{contractId:t.info.id,status:"2"},function(t){t&&200===t.code?mui.toast("作废成功！"):mui.alert("作废失败，服务端返回信息:"+t.message,"错误信息")},"json")})},t.action=function(){switch(t.actionInfo.actionType){case"audit":t.audit();break;case"cancel":t.cancelAudit();break;case"disuse":t.disuse()}},t.$on("$routeChangeSuccess",function(){var e=r.current.pathParams.contractId,n=r.current.pathParams.type;t.actionInfo={actionType:n,message:u[n]},t.queryInfo(e)})}])}},function(t,e){e.installController=function(t,e){t.controller("tradeContract.uploadController",["$scope","muiSupport","http","$rootScope","$route","cache","wx",function(t,n,o,i,r,a,c){t.agreeList=[{fileInfoType:"agreeAccessory"}],t.info={},t.contractId="",t.uploadImage=function(){c.uploadImage(function(n){o.post(BTPATH.SAVE_CONTRACT_LEDGER_FILE,{contractId:t.contractId,fileTypeName:"agreeAccessory",fileMediaId:n.serverId}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){var e=t.agreeList.length;t.agreeList[e-1]=n.data,t.agreeList.push({fileInfoType:"agreeAccessory"})})})},!0)},t.delUpload=function(n){o.post(BTPATH.DELETE_CONTRACT_FILE,{fileId:n.id}).success(function(o){e.isCurrentResponse(o)?t.$apply(function(){t.agreeList=ArrayPlus(t.agreeList).delChild("id",n.id)}):mui.alert("删除失败,服务端\n返回信息:"+o.message,"错误信息")})},t.preImg=function(e){a.put("agree_list",t.agreeList),a.put("contract_info",$.extend({preImg:!0},t.info)),window.location.href="#/preImg/"+e.id},t.$on("$routeChangeSuccess",function(){var e=a.get("contract_info"),n=a.get("agree_list");e&&e.preImg&&(t.agreeList=n,t.info=e,a.put("agree_list",[]),a.put("contract_info",{})),
t.contractId=r.current.pathParams.contractId,t.queryContractList()}),t.queryContractList=function(){var n=o.post(BTPATH.FIND_CONTRACT_LEDGER_FILEINFO,{contractId:t.contractId}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.agreeList=n.data.custFileList,t.agreeList.push({fileInfoType:"agreeAccessory"})})});return n}}])}},function(t,e){e.installController=function(t,e){t.controller("tradeContract.attachController",["$scope","muiSupport","http","$rootScope","$route","cache","wx",function(t,n,o,i,r,a,c){t.agreeList=[],t.info={},t.contractInfo={},t.queryContractList=function(n){var i=o.post(BTPATH.FIND_CONTRACT_LEDGER_FILEINFO,{contractId:n}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.agreeList=n.data.custFileList,t.contractInfo=n.data})});return i},t.preImg=function(e){a.put("agree_list",t.agreeList),a.put("contract_info",$.extend({preImg:!0},t.info)),window.location.href="#/preImg/"+e.id},t.$on("$routeChangeSuccess",function(){var e=r.current.pathParams.contractId,n=a.get("contract_info"),o=a.get("agree_list");n&&n.preImg&&(t.agreeList=o,t.info=n,a.put("agree_list",[]),a.put("contract_info",{})),t.queryContractList(e)})}])}},function(t,e){e.installController=function(t,e){t.controller("relation.manageController",["$scope","muiSupport","http","$rootScope","cache",function(t,n,o,i,r){_statusPicker={},_statusList=[],t.custType="",t.searchData={relationType:""},t.relationList=[],t.listPage={pageNum:1,pageSize:10},t.lookDetail=function(e){r.put("detail_info",e),"SUPPLIER_USER"==t.custType?e.relateType+""=="0"?location.href="#/relation/factor/detail":location.href="#/relation/core/detail":"SELLER_USER"==t.custType?e.relateType+""=="3"?location.href="#/relation/factor/detail":location.href="#/relation/core/detail":"CORE_USER"==t.custType&&(e.relateType+""=="2"?location.href="#/relation/factor/detail":location.href="#/relation/core/detail")},t.queryList=function(){return n.showBar(),o.post(BTPATH.QUER_CUST_RELATION,$.extend(t.listPage,{flag:1},t.searchData)).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.relationList=o.data,t.listPage=o.page})})},t.changeStatus=function(){_statusPicker.show(function(e){t.$apply(function(){t.searchData.relationType=e[0].value}),t.relationList=[],t.listPage.pageNum=1,t.queryList()})},t.findCustTypeByLogin=function(){return o.post(BTPATH.FIND_CUST_TYPE_LOGIN,{}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.custType=n.data})})},t.$on("$routeChangeSuccess",function(){t.findCustTypeByLogin().success(function(){"SUPPLIER_USER"==t.custType?_statusList=BTDict.SupplierStatus.toArray("value","text"):"SELLER_USER"==t.custType?_statusList=BTDict.SellerStatus.toArray("value","text"):"CORE_USER"==t.custType&&(_statusList=BTDict.CoreStatus.toArray("value","text")),_statusPicker=n.singleSelect(_statusList),t.queryList()})})}])}},function(t,e){e.installController=function(t,e){t.controller("relation.selectController",["$scope","muiSupport","http","$rootScope","cache",function(t,n,o,i,r){t.custTypeList={},t.findCustType=function(){return o.post(BTPATH.FIND_CUST_TYPE,$.extend()).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.custTypeList=n.data})})},t.cacheSelect=function(t){r.put("related_cust",t)},t.$on("$routeChangeSuccess",function(){t.findCustType()})}])}},function(t,e){e.installController=function(t,e){t.controller("relation.coreRelatedController",["$scope","muiSupport","http","$rootScope","cache","commonService",function(t,n,o,i,r,a){t.searchData={custName:""},t.coreCustList=[],t.selectedList=[],t.addCustData={relationCustStr:"",custType:""},t.toggleCheckItem=function(e){e.isChecked=!e.isChecked,e.isChecked?t.selectedList.push(e):t.selectedList=ArrayPlus(t.selectedList).delChild("value",e.value)},t.delThisItem=function(e){mui.confirm("是否确认删除此项?","温馨提示","",function(n){1==n.index&&t.$apply(function(){e.isChecked=!1,t.selectedList=ArrayPlus(t.selectedList).delChild("value",e.value)})})},t.clickcChekedItem=function(e){e.isChecked=!0,mui("#search_popover").popover("hide"),ArrayPlus(t.selectedList).objectChildFilter("value",e.value).length>=1||t.selectedList.push(e)},t.applyAction=function(e){r.put("apply_related_core",t.selectedList),t.addCustData.relationCustStr=ArrayPlus(t.selectedList).extractChildArray("value",!0),t.addCustData.relationCustStr||mui.alert("请至少选择一个关联机构!","温馨提示"),t.addCustData.custType=r.get("related_cust").value,$.post(BTPATH.ADD_CUST_RELATION,t.addCustData,function(t){t&&200===t.code?location.href="#/relation/core/show":mui.alert("申请失败:"+t.message,"错误信息")},"json")},t.openPanel=function(){mui("#search_popover").popover("show"),$("#search_key").focus()},t.$on("$routeChangeSuccess",function(){t.findCustInfo()}),t.findCustInfo=function(){return o.post(BTPATH.FIND_CUST_INFO,{custType:r.get("related_cust").value}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.coreCustList=n.data})})}}])}},function(t,e){e.installController=function(t,e){t.controller("relation.coreShowController",["$scope","muiSupport","http","$rootScope","cache",function(t,e,n,o,i){t.coreList=[],t.$on("$routeChangeSuccess",function(){t.coreList=i.get("apply_related_core"),setTimeout(function(){location.href="#/relation/manage"},5e3)})}])}},function(t,e){e.installController=function(t,e){t.controller("relation.coreDetailController",["$scope","muiSupport","http","$rootScope","cache",function(t,e,n,o,i){t.info={relateCustname:""},t.$on("$routeChangeSuccess",function(){t.info=i.get("detail_info")})}])}},function(t,e){e.installController=function(t,e){t.controller("relation.factorRelatedController",["$scope","muiSupport","http","$rootScope","cache","commonService",function(t,n,o,i,r,a){t.searchData={custName:""},t.factorList=[],t.selectedList=[],t.addCustData={relationCustStr:"",custType:""},t.toggleCheckItem=function(e){return!e.isChecked&&t.selectedList.length>=1?void mui.alert("只能选择一个保理机构!","温馨提示"):(e.isChecked=!e.isChecked,void(e.isChecked?t.selectedList.push(e):t.selectedList=ArrayPlus(t.selectedList).delChild("value",e.value)))},t.delThisItem=function(e){mui.confirm("是否确认删除此项?","温馨提示","",function(n){1==n.index&&t.$apply(function(){e.isChecked=!1,t.selectedList=ArrayPlus(t.selectedList).delChild("value",e.value)})})},t.clickcChekedItem=function(e){return t.selectedList.length>=1?void mui.alert("只能选择一个保理机构!","温馨提示"):(e.isChecked=!0,mui("#search_popover").popover("hide"),void(ArrayPlus(t.selectedList).objectChildFilter("value",e.value).length>=1||t.selectedList.push(e)))},t.applyAction=function(e){return r.put("apply_related_factor",t.selectedList),t.addCustData.relationCustStr=ArrayPlus(t.selectedList).extractChildArray("value",!0),t.addCustData.relationCustStr?(t.addCustData.custType=r.get("related_cust").value,void(location.href="#/relation/factor/attach")):void mui.alert("请选择一个保理机构!","温馨提示")},t.queryList=function(){var e=t.searchData.LikeCustName;e&&console.info("param"+t.searchData.LikeCustName)},t.openPanel=function(){mui("#search_popover").popover("show"),$("#search_key").focus()},t.$on("$routeChangeSuccess",function(){t.findCustInfo()}),t.findCustInfo=function(){return console.info("param"+r.get("related_cust").value),o.post(BTPATH.FIND_CUST_INFO,{custType:r.get("related_cust").value}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.factorList=n.data})})}}])}},function(t,e){e.installController=function(t,e){t.controller("relation.factorAttachController",["$scope","muiSupport","http","$rootScope","cache","wx",function(t,n,o,i,r,a){t.upLoadList=[],t.elecAgreementServiceCustList=[],t.elecCustFileList=[],t.delUpload=function(n){o.post(BTPATH.DELETE_CUSTADUIT_TEMP_FILE,{id:n.id}).success(function(o){e.isCurrentResponse(o)?t.$apply(function(){t.upLoadList=ArrayPlus(t.upLoadList).replaceChild("fileInfoType",n.fileInfoType,{fileInfoType:n.fileInfoType,fileDescription:n.fileDescription})}):mui.alert("删除失败,服务端\n返回信息:"+o.message,"错误信息")})},t.delWosUpload=function(n){o.post(BTPATH.DELETE_CUSTADUIT_TEMP_FILE,{id:n.id}).success(function(o){e.isCurrentResponse(o)?t.$apply(function(){t.elecCustFileList=ArrayPlus(t.elecCustFileList).replaceChild("fileInfoType",n.fileInfoType,{fileInfoType:n.fileInfoType,fileDescription:n.fileDescription})}):mui.alert("删除失败,服务端\n返回信息:"+o.message,"错误信息")})},t.preImg=function(e){r.put("pre_upload_list",t.upLoadList),r.put("account_info",t.info),window.location.href="#/preImg/"+e.id+",1"},t.uploadImage=function(n){a.uploadImage(function(i){o.post(BTPATH.ADD_CUST_FILEADUIT_TEMP,{relateCustNo:r.get("apply_related_factor")[0].value,fileTypeName:n,fileMediaId:i.serverId,custType:"FACTOR_USER"}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){var e=n.data.fileInfoType;t.upLoadList=ArrayPlus(t.upLoadList).replaceChild("fileInfoType",e,n.data)})})},!0)},t.uploadWosImage=function(n){a.uploadImage(function(i){o.post(BTPATH.ADD_CUST_FILEADUIT_TEMP,{relateCustNo:t.elecAgreementServiceCustList[0].value,fileTypeName:n,fileMediaId:i.serverId,custType:"WOS"}).success(function(n){console.log(n),e.isCurrentData(n)&&t.$apply(function(){var e=n.data.fileInfoType;t.elecCustFileList=ArrayPlus(t.elecCustFileList).replaceChild("fileInfoType",e,n.data)})})},!0)},t.nextStep=function(){r.put("apply_related_wos",t.elecAgreementServiceCustList),window.location.href="#/relation/factor/ensure"},t.$on("$routeChangeSuccess",function(){t.findCustInfo();var e=r.get("pre_upload_list"),n=r.get("account_info");e&&n&&(t.upLoadList=e,t.info=n,r.put("pre_upload_list",[]),r.put("account_info",{}))}),t.findCustInfo=function(){console.info("param"+r.get("apply_related_factor")[0].value),$.post(BTPATH.FIND_CUST_ADUIT_TEMP,{relateCustNo:r.get("apply_related_factor")[0].value},function(n){return e.isCurrentData(n)?void t.$apply(function(){t.upLoadList=n.data}):(mui.alert("未查询到数据"),void(location.href="#/relation/select"))},"json"),$.post(BTPATH.FIND_ELECAGREEMENT_SERVICE_CUST,function(n){e.isCurrentData(n)&&t.$apply(function(){t.elecAgreementServiceCustList=n.data,t.findElecAgreementServiceCustList(!0)})},"json")},t.findElecAgreementServiceCustList=function(n){return o.post(BTPATH.FIND_CUST_ADUIT_TEMP,{relateCustNo:t.elecAgreementServiceCustList[0].value}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.elecCustFileList=n.data})})}}])}},function(t,e){e.installController=function(t,e){t.controller("relation.factorEnsureController",["$scope","muiSupport","http","$rootScope","cache",function(t,e,n,o,i){t.factorList=[],t.addCustData={factorCustType:"FACTOR_USER",wosCustType:"WOS",wosCustNoList:"",factorCustNoList:""},t.applyAction=function(){return t.factorList.length<=0?void mui.alert("请选择保理公司"):void $.post(BTPATH.ADD_FACTORCUST_RELATION,t.addCustData,function(t){t&&200===t.code?location.href="#/relation/factor/show":(mui.alert("申请失败:"+t.message,"错误信息"),location.href="#/relation/factor/attach")},"json")},t.$on("$routeChangeSuccess",function(){t.factorList=i.get("apply_related_factor"),t.addCustData.factorCustNoList=i.get("apply_related_factor")[0].value,t.addCustData.wosCustNoList=i.get("apply_related_wos")[0].value})}])}},function(t,e){e.installController=function(t,e){t.controller("relation.factorShowController",["$scope","muiSupport","http","$rootScope","cache",function(t,e,n,o,i){t.factorList=[],t.$on("$routeChangeSuccess",function(){t.factorList=i.get("apply_related_factor"),setTimeout(function(){location.href="#/relation/manage"},5e3)})}])}},function(t,e){e.installController=function(t,e){t.controller("relation.factorDetailController",["$scope","muiSupport","http","$rootScope","cache",function(t,n,o,i,r){t.info={relateCustname:""},t.recordList=[],t.applyAgain=function(){r.put("apply_related_factor",[{value:t.info.relateCustno,name:t.info.relateCustname}]),window.location.href="#/relation/factor/attach"},t.$on("$routeChangeSuccess",function(){t.info=r.get("detail_info"),t.findCustRelateAduitRecord(t.info.relateCustno)}),t.findCustRelateAduitRecord=function(n){$.post(BTPATH.FIND_CUST_RELATEADUIT_RECORD,{custNo:n},function(n){e.isCurrentData(n)&&t.$apply(function(){t.recordList=n.data})},"json")}}])}},function(t,e){e.installController=function(t,e){t.controller("financeBusi.applyController",["$scope","muiSupport","http","$rootScope","$route","cache","wx",function(t,n,o,i,r,a,c){_creditPicker={},_productPicker={},_unitPicker={},_factorPicker={},t.periodUnits=BTDict.PeriodUnit.toArray("value","text"),t.info={},t.subjectMasterList=[],t.creditList=[],t.productList=[],t.factorList=[],t.agreeUploadList=[{fileInfoType:"agreeAccessory"}],t.invoiceUploadList=[{fileInfoType:"invoiceFile"}],t.changeCredit=function(){_creditPicker.show(function(e){t.$apply(function(){t.info.creditMode=e[0].value,t.info.creditName=e[0].text})})},t.changeProduct=function(){_productPicker.show(function(e){t.$apply(function(){t.info.productId=e[0].value,t.info.productName=e[0].text})})},t.changeFactor=function(){_factorPicker.show(function(e){t.$apply(function(){t.info.factorNo=e[0].value,t.info.factorName=e[0].text,t.info.credit="",t.info.creditName="",t.info.productId="",t.info.productName="",t.queryFactorList().success(function(){_factorPicker=n.singleSelect(t.factorList),t.queryProductList().success(function(){_productPicker=n.singleSelect(t.productList)}),t.queryCreditList().success(function(){_creditPicker=n.singleSelect(t.creditList)})})})})},t.changeUnit=function(){_unitPicker.show(function(e){t.$apply(function(){t.info.periodUnit=e[0].value,t.info.periodUnitName=e[0].text})})},t.queryInfo=function(t,e){},t.querySubjectMasterList=function(n,i){var r=o.post(BTPATH.FIND_SUBJECT_MASTER,{id:n,type:i}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){n.data&&n.data[0]&&(t.info=$.extend({},t.info,{custNo:n.data[0].holderNo,custName:n.data[0].holder,coreCustNo:n.data[0].coreCustNo,coreCustName:n.data[0].coreCustName})),t.subjectMasterList=n.data})});return r},t.queryFactorList=function(){var n=o.post(BTPATH.QUERY_FACTOR_KEY_AND_VALUE,{custNo:t.info.custNo}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.factorList=ArrayPlus(n.data).replaceChildProp("name","text",!0)})});return n},t.queryProductList=function(){var n=o.post(BTPATH.FIND_PRODUCT_LIST,{}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.productList=ArrayPlus(n.data).replaceChildProp("name","text",!0)})});return n},t.queryCreditList=function(){var n=o.post(BTPATH.FIND_CREDIT,{custNo:t.info.custNo,coreCustNo:t.info.coreCustNo,factorNo:t.info.factorNo}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.creditList=ArrayPlus(n.data).replaceChildProp("name","text",!0)})});return n},t.queryAgreeUploadList=function(){o.post(BTPATH.QUERY_UPLOAD_LIST,{batchNo:""}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.agreeUploadList=n.data,t.agreeUploadList.push({})})})},t.queryInvoiceUploadList=function(){o.post(BTPATH.QUERY_UPLOAD_LIST,{batchNo:""}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.invoiceUploadList=n.data,t.invoiceUploadList.push({})})})},t.applyFinance=function(){var n=$.merge(t.agreeUploadList,t.invoiceUploadList),i=ArrayPlus(n).extractChildArray("id",!0),r=$.extend({},t.info,{requestType:t.info.type,bondBalance:t.info.bondBalance,requestFrom:"2",fileList:i}),a={workFlowName:"supplier"==t.currRole?"资金方-供应商融资审批流程":"资金方-经销商融资审批流程",custNo:t.info.factorNo,startCustNo:t.info.custNo,factorCustNo:t.info.factorNo,supplierCustNo:"supplier"==t.currRole?t.info.custNo:"",coreCustNo:t.info.coreCustNo,sellerCustNo:"agency"==t.currRole?t.info.custNo:"",data:JSON.stringify(r)};o.post(BTPATH.STAR_TWORK_FLOW,a).success(function(t){e.isCurrentData(t)?mui.alert("申请成功,点击确定返回票据列表","温馨提示",function(){window.location.href="#/billPool"}):mui.alert("申请失败,请联系客服人员,服务端\n返回信息:"+t.message,"错误信息")})},t.queryCurrentRole=function(){o.post(BTPATH.GET_CURRENT_ROLE,{}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){"SELLER_USER "===n.data?t.currRole="agency":t.currRole="supplier"})})};var u={agree:{upload_path:BTPATH.SAVE_REHISTERPLUS_INFO,fileInfoType:"agreeAccessory",listName:"agreeUploadList"},invoice:{upload_path:BTPATH.SAVE_REHISTERPLUS_INFO,fileInfoType:"invoiceFile",listName:"invoiceUploadList"}};t.uploadImage=function(n){var i=u[n];c.uploadImage(function(n){o.post(i.upload_path,{fileTypeName:i.fileInfoType,fileMediaId:n.serverId}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){var e=t[i.listName].length;t[i.listName][e-1]=n.data,t[i.listName].push({fileInfoType:i.fileInfoType})})})},!0)},t.delUpload=function(e,n){var o=u[n];t[o.listName]=ArrayPlus(t[o.listName]).delChild("id",e.id)},t.preImg=function(e){a.put("agree_upload_list",t.agreeUploadList),a.put("invoice_upload_list",t.invoiceUploadList),a.put("finance_apply_info",$.extend({preImg:!0},t.info)),window.location.href="#/preImg/"+e.id},t.$on("$routeChangeSuccess",function(){var e=a.get("apply_finance_info");if(e){t.info.type=e.type,t.info.orders=e.id,e.factorNo&&(t.info.factorNo=e.factorNo,t.info.factorName=e.factorName,t.info.balance=e.balance),t.querySubjectMasterList(e.id,e.type).success(function(){for(var e=0,o=0;o<t.subjectMasterList.length;o++){var i=t.subjectMasterList[o];e+=i.balance}t.info.invoiceBalance=e,t.queryFactorList().success(function(){_factorPicker=n.singleSelect(t.factorList),t.queryProductList().success(function(){_productPicker=n.singleSelect(t.productList)}),t.queryCreditList().success(function(){_creditPicker=n.singleSelect(t.creditList)})})}),_unitPicker=n.singleSelect(t.periodUnits),t.queryCurrentRole();var o=a.get("finance_apply_info"),i=a.get("agree_upload_list"),r=a.get("invoice_upload_list");o&&o.preImg&&(t.agreeUploadList=i,t.invoiceUploadList=r,t.info=o,a.put("agree_upload_list",[]),a.put("invoice_upload_list",[]),a.put("finance_apply_info",{}))}})}])}},function(t,e){e.installController=function(t,e){t.controller("financeBusi.detailController",["$scope","muiSupport","http","$rootScope","$route","cache","commonService",function(t,n,o,i,r,a,c){t.info={},t.scheme={},t.recieveList=[],t.billList=[],t.materialList=[],t.otherInfoList=[],t.loanInfo={},t.agreeList=[];var u={2:{type:"bill",list_name:"billList"},3:{type:"recieve",list_name:"recieveList"}};t.creditList=[],t.queryFinanceInfo=function(e){var n=o.post(BTPATH.QUERY_FINANCE_DETAIL,{requestNo:e}).success(function(e){void 0!==e&&void 0!==e.data&&""!==e.data&&200===e.code&&t.$apply(function(){t.info=e.data})});return n},t.queryLoanSchemeInfo=function(e){var n=o.post(BTPATH.FIND_SCHEME,{requestNo:e}).success(function(e){void 0!==e&&void 0!==e.data&&""!==e.data&&200===e.code&&t.$apply(function(){t.loanInfo=e.data})});return n},t.queryProofList=function(){var n=t.info.requestType,i=t.info.orders,r=u[n];n&&r&&o.post(BTPATH.FIND_SUBJECT_MASTER,{type:n,id:i}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t[r.list_name]=e.cloneArrayDeep(n.data)})})},t.queryCreditList=function(){var n=o.post(BTPATH.FIND_CREDIT,{custNo:t.info.custNo,coreCustNo:t.info.coreCustNo,factorNo:t.info.factorNo}).success(function(n){e.isCurrentData(n)&&t.$apply(function(){t.creditList=ArrayPlus(n.data).replaceChildProp("name","text",!0)})});return n},t.$on("$routeChangeSuccess",function(){var e=r.current.pathParams.requestNo;t.queryFinanceInfo(e).success(function(){t.queryProofList(e),c.queryBaseInfoList(BTPATH.FIND_CREDIT,{custNo:t.info.custNo,coreCustNo:t.info.coreCustNo,factorNo:t.info.factorNo},t,"creditList","_CreditDict"),c.queryBaseInfoList(BTPATH.QUERY_UPLOAD_LIST,{batchNo:t.info.batchNo},t,"materialList")}),t.queryLoanSchemeInfo(e),c.queryBaseInfoList(BTPATH.QUERY_OTHER_FILE,{requestNo:e},t,"otherInfoList"),c.queryBaseInfoList(BTPATH.FIND_ELEC_AGREE_BY_REQUESTNO,{requestNo:e,signType:""},t,"agreeList")})}])}},function(t,e){e.installController=function(t,e){t.controller("financeSearch.pendController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){t.beginPicker={},t.endPicker={},t.listPage={pageNum:1,pageSize:10},t.searchData={GTErequestDate:(new Date).getSubDate("MM",3).format("YYYY-MM-DD"),LTErequestDate:(new Date).getSubDate("MM",-3).format("YYYY-MM-DD"),lastStatus:"0,1,2,3"},t.financeList=[],t.queryList=function(){t.listPage.pageNum=1,t.queryFinanceList(!0)},t.queryFinanceList=function(i){return n.showBar(),t.listPage.flag=i?1:2,o.post(BTPATH.QUERY_REQUEST,$.extend({},t.listPage,t.searchData)).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.financeList=t.financeList.concat(o.data),i&&(t.listPage=o.page)})})},t.changeStatus=function(e){"begin"===e?t.beginPicker.beginShow(t,"endPicker",t.searchData.LTErequestDate,function(e){t.$apply(function(){t.searchData.GTErequestDate=e.text,t.financeList=[]}),t.queryList()}):t.endPicker.endShow(t,"beginPicker",t.searchData.GTErequestDate,function(e){t.$apply(function(){t.searchData.LTErequestDate=e.text,t.financeList=[]}),t.queryList()})},t.lookDetail=function(t){window.location.href="#/financeBusi/detail/"+t.requestNo},t.$on("$routeChangeSuccess",function(){var e=n.crtLinkDate(t.searchData.GTErequestDate,t.searchData.LTErequestDate);t.beginPicker=e.begin,t.endPicker=e.end,t.queryFinanceList(!0)})}])}},function(t,e){e.installController=function(t,e){t.controller("financeSearch.repayController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){t.beginPicker={},t.endPicker={},t.listPage={pageNum:1,pageSize:10},t.searchData={GTErequestDate:(new Date).getSubDate("MM",3).format("YYYY-MM-DD"),LTErequestDate:(new Date).getSubDate("MM",-3).format("YYYY-MM-DD"),lastStatus:"4,5,6,7"},t.financeList=[],t.queryList=function(){t.listPage.pageNum=1,t.queryFinanceList()},t.queryFinanceList=function(i){return n.showBar(),t.listPage.flag=i?1:2,o.post(BTPATH.QUERY_REQUEST,$.extend({},t.listPage,t.searchData)).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.financeList=t.financeList.concat(o.data),i&&(t.listPage=o.page)})})},t.changeStatus=function(e){"begin"===e?t.beginPicker.beginShow(t,"endPicker",t.searchData.LTErequestDate,function(e){t.$apply(function(){t.searchData.GTErequestDate=e.text,t.financeList=[]}),t.queryList()}):t.endPicker.endShow(t,"beginPicker",t.searchData.GTErequestDate,function(e){t.$apply(function(){t.searchData.LTErequestDate=e.text,t.financeList=[]}),t.queryList()})},t.lookDetail=function(t){window.location.href="#/financeBusi/detail/"+t.requestNo},t.$on("$routeChangeSuccess",function(){var e=n.crtLinkDate(t.searchData.GTErequestDate,t.searchData.LTErequestDate);t.beginPicker=e.begin,t.endPicker=e.end,t.queryFinanceList(!0)})}])}},function(t,e){e.installController=function(t,e){t.controller("financeSearch.historyController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){t.beginPicker={},t.endPicker={},t.listPage={pageNum:1,pageSize:10},t.searchData={GTErequestDate:(new Date).getSubDate("MM",3).format("YYYY-MM-DD"),LTErequestDate:(new Date).getSubDate("MM",-3).format("YYYY-MM-DD"),lastStatus:"8"},t.financeList=[],t.queryList=function(){t.listPage.pageNum=1,t.queryFinanceList()},t.queryFinanceList=function(i){return n.showBar(),t.listPage.flag=i?1:2,o.post(BTPATH.QUERY_REQUEST,$.extend({},t.listPage,t.searchData)).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.financeList=t.financeList.concat(o.data),i&&(t.listPage=o.page)})})},t.changeStatus=function(e){"begin"===e?t.beginPicker.beginShow(t,"endPicker",t.searchData.LTErequestDate,function(e){t.$apply(function(){t.searchData.GTErequestDate=e.text,t.financeList=[]}),t.queryList()}):t.endPicker.endShow(t,"beginPicker",t.searchData.GTErequestDate,function(e){t.$apply(function(){t.searchData.LTErequestDate=e.text,t.financeList=[]}),t.queryList()})},t.lookDetail=function(t){window.location.href="#/financeBusi/detail/"+t.requestNo},t.$on("$routeChangeSuccess",function(){var e=n.crtLinkDate(t.searchData.GTErequestDate,t.searchData.LTErequestDate);t.beginPicker=e.begin,t.endPicker=e.end,t.queryFinanceList(!0)})}])}},function(t,e){e.installController=function(t,e){t.controller("inquiryController",["$scope","muiSupport","http","$rootScope",function(t,n,o,i){_statusPicker={},_statusList=BTDict.AcceptFinanceFlag.toArray("value","text"),t.searchData={financeFlag:""},t.infoList=[],t.listPage={pageNum:1,pageSize:10},t.changeStatus=function(){_statusPicker.show(function(e){t.$apply(function(){t.searchData.financeFlag=e[0].value}),t.queryList()})},t.queryList=function(){return n.showBar(),o.post(BTPATH.QUERY_BILL_ENQUIRY_LIST,$.extend({},t.listPage,{businStatus:t.searchData.businStatus,flag:1})).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.infoList=o.data,t.listPage=o.page})})},t.showDetail=function(t){window.location.href="#/inquiry/detail/"+t.enquiryNo},t.$on("$routeChangeSuccess",function(){_statusPicker=n.singleSelect(_statusList),t.queryList()})}])}},function(t,e){e.installController=function(t,e){t.controller("inquiry.detailController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route",function(t,n,o,i,r,a,c,r){_statusPicker={},_statusList=BTDict.AcceptFinanceFlag.toArray("value","text"),t.info={},t.objectList={},t.upLoadList=[],t.queryInfo=function(n){return o.post(BTPATH.QUERY_BILL_ENQUIRY_DETAIL,{enquiryNo:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应询价信息,服务端\n返回信息:"+n.message,"错误信息")})},t.queryObjectList=function(n){return o.post(BTPATH.QUERY_OFFER_BY_ENQUIRY_OBJECT,{enquiryNo:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.objectList=n.data}):mui.alert("未查询到对应报价信息,服务端\n返回信息:"+n.message,"错误信息")})},t.applyFinance=function(e){a.put("apply_finance_info",{type:"2",id:t.info.orders,factorNo:e.factorNo,factorName:e.factorName,balance:e.offer.balance}),window.location.href="#/financeBusi/apply"},t.$on("$routeChangeSuccess",function(){var e=r.current.pathParams.enquiryNo;t.queryInfo(e),t.queryObjectList(e);var n=a.get("pre_upload_list");n&&(t.upLoadList=n,a.put("pre_upload_list",[]))})}])}},function(t,e){e.installController=function(t,e){t.controller("inquiry.recordController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route",function(t,n,o,i,r,a,c,r){_statusPicker={},_statusList=BTDict.AcceptFinanceFlag.toArray("value","text"),t.info={},t.offerList={},t.enquiryObject={},t.upLoadList=[],t.queryInfo=function(n){return o.post(BTPATH.QUERY_BILL_ENQUIRY_DETAIL,{enquiryNo:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应询价信息,服务端\n返回信息:"+n.message,"错误信息")})},t.queryOfferList=function(n,i){return o.post(BTPATH.SEARCH_OFFER_LIST,{enquiryNo:n,factorNo:i}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.offerList=n.data}):mui.alert("未查询到对应报价信息,服务端\n返回信息:"+n.message,"错误信息")})},t.queryEnquiryObject=function(n,i){return o.post(BTPATH.QUERY_ENQUIRY_OBJECT,{enquiryNo:n,factorNo:i}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.enquiryObject=n.data}):mui.alert("未查询到对应询价信息,服务端\n返回信息:"+n.message,"错误信息")})},t.$on("$routeChangeSuccess",function(){var e=r.current.pathParams.enquiryNo.split(","),n=e[0],o=e[1];t.queryInfo(n),t.queryEnquiryObject(n,o),t.queryOfferList(n,o);var i=a.get("pre_upload_list");i&&(t.upLoadList=i,a.put("pre_upload_list",[]))})}])}},function(t,e){e.installController=function(t,e){t.controller("inquiry.doController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route",function(t,n,o,i,r,a,c,r){_statusPicker={},_statusList=BTDict.AcceptFinanceFlag.toArray("value","text"),t.enquiryStrategy=BTDict.ScfEnquiryStrategy.toArray("value","text"),t.info={},t.factorList={},t.inquiry={},t.queryInfo=function(n){return o.post(BTPATH.QUERY_ONE_BILL,{id:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data,t.inquiry.endDate=(new Date).getSubDate("DD",-1).format("YYYY-MM-DD")}):mui.alert("未查询到对应票据信息,服务端\n返回信息:"+n.message,"错误信息")})},t.queryFactor=function(){return o.post(BTPATH.CUST_RELATION).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.factorList=n.data}):mui.alert("未查询到对应保理公司信息,服务端\n返回信息:"+n.message,"错误信息")})},t.applyInquiry=function(){var n=ArrayPlus(t.enquiryStrategy).objectChildFilterByBoolean("isChecked",!0);t.inquiry.strategy=ArrayPlus(n).extractChildArray("value",!0);var i=ArrayPlus(t.factorList).objectChildFilterByBoolean("isChecked",!0);return i&&0!==i.length?(t.inquiry.factors=ArrayPlus(i).extractChildArray("value",!0),t.inquiry.orders=t.info.id,t.inquiry.enquiryMethod=2,t.inquiry.requestType=2,void o.post(BTPATH.ADD_ENQUIRY,t.inquiry).success(function(t){e.isCurrentResponse(t)?mui.alert("询价成功！","温馨提示",function(){window.history.back()}):mui.alert("询价失败,服务端\n返回信息:"+t.message,"错误信息")})):(mui.alert("请选择金融机构！","温馨提示"),!1)},t.changeDate=function(){var e={value:(new Date).getSubDate("DD",-1).format("YYYY-MM-DD"),type:"date"},o=n.dateSelect(e);o.show(function(e){t.$apply(function(){t.inquiry.endDate=e.text})})},t.singleToggleItem=function(t,e){ArrayPlus(e).setKeyArrayObj("isChecked",!1),ArrayPlus(e).setKeyArrayObj("isChecked",!0,"value",t.value)},t.toggleCheckItem=function(t){t.isChecked=!t.isChecked},t.$on("$routeChangeSuccess",function(){t.enquiryStrategy=ArrayPlus(t.enquiryStrategy).addKey4ArrayObj("isChecked",!1);var e=r.current.pathParams.id;t.queryInfo(e),t.queryFactor()})}])}},function(t,e){e.installController=function(t,e){t.controller("inquiry.replyController",["$scope","muiSupport","http","$rootScope","$route","cache","wx",function(t,n,o,i,r,a,c){_statusPicker={},_statusList=BTDict.AcceptFinanceFlag.toArray("value","text"),t.info={},t.relyInfo={},t.offerList={},t.enquiryObject={},t.queryInfo=function(n){return o.post(BTPATH.QUERY_BILL_ENQUIRY_DETAIL,{enquiryNo:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应询价信息,服务端\n返回信息:"+n.message,"错误信息")})},t.queryOfferList=function(n,i){return o.post(BTPATH.SEARCH_OFFER_LIST,{enquiryNo:n,factorNo:i}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.offerList=n.data}):mui.alert("未查询到对应报价信息,服务端\n返回信息:"+n.message,"错误信息")})},t.queryEnquiryObject=function(n,i){return o.post(BTPATH.QUERY_ENQUIRY_OBJECT,{enquiryNo:n,factorNo:i}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.enquiryObject=n.data}):mui.alert("未查询到对应询价信息,服务端\n返回信息:"+n.message,"错误信息")})},t.saveReply=function(){return t.relyInfo.offerId=t.enquiryObject.offerId,o.post(BTPATH.ADD_OFFER_REPLY,t.relyInfo).success(function(t){e.isCurrentResponse(t)?mui.alert("回复报价成功！","温馨提示",function(){window.history.back()}):mui.alert("回复报价失败,服务端\n返回信息:"+t.message,"错误信息")})},t.$on("$routeChangeSuccess",function(){var e=r.current.pathParams.id.split(","),n=e[0],o=e[1];t.queryInfo(n),t.queryEnquiryObject(n,o),t.queryOfferList(n,o)})}])}},function(t,e){e.installController=function(t,e){t.controller("inquiry.abandonController",["$scope","muiSupport","http","$rootScope","$route","cache","wx","$route",function(t,n,o,i,r,a,c,r){_statusPicker={},_statusList=BTDict.AcceptFinanceFlag.toArray("value","text"),t.dropReason=BTDict.DropReason.toArray("value","text"),t.info={},t.enquiryObject={},t.abandon={},t.queryInfo=function(n){return o.post(BTPATH.QUERY_BILL_ENQUIRY_DETAIL,{enquiryNo:n}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.info=n.data}):mui.alert("未查询到对应询价信息,服务端\n返回信息:"+n.message,"错误信息")})},t.queryEnquiryObject=function(n,i){return o.post(BTPATH.QUERY_ENQUIRY_OBJECT,{enquiryNo:n,factorNo:i}).success(function(n){e.isCurrentResponse(n)?t.$apply(function(){t.enquiryObject=n.data}):mui.alert("未查询到对应询价信息,服务端\n返回信息:"+n.message,"错误信息")})},t.saveAbandon=function(){var n=ArrayPlus(t.dropReason).objectChildFilterByBoolean("isChecked",!0);return t.abandon.dropReason=ArrayPlus(n).extractChildArray("value",!0),t.abandon.offerId=t.enquiryObject.offerId,t.abandon.enquiryNo=t.enquiryObject.enquiryNo,o.post(BTPATH.CUST_DROP_ENQUIRY,t.abandon).success(function(t){e.isCurrentResponse(t)?mui.alert("信息保存成功！","温馨提示",function(){window.history.back()}):mui.alert("信息保存失败,服务端\n返回信息:"+t.message,"错误信息")})},t.toggleCheckItem=function(t){t.isChecked=!t.isChecked;
},t.$on("$routeChangeSuccess",function(){t.dropReason=ArrayPlus(t.dropReason).addKey4ArrayObj("isChecked",!1);var e=r.current.pathParams.id.split(","),n=e[0],o=e[1];t.queryInfo(n),t.queryEnquiryObject(n,o)})}])}},function(t,e){e.installController=function(t,e){t.controller("preImgController",["$scope","muiSupport","http","$rootScope","$route",function(t,e,n,o,i){t.fileId="",t.preType="",t.$on("$routeChangeSuccess",function(){var e=i.current.pathParams.id,n=e.split(",");t.fileId=n[0],t.preType=n[1]})}])}},function(t,e){e.installController=function(t,e){t.controller("tempController",["$scope","muiSupport","http","$rootScope","$route","cache",function(t,n,o,i,r,a){_statusPicker={},_statusList=BTDict.BillNoteStatus.toArray("value","text"),t.searchData={businStatus:""},t.listPage={pageNum:1,pageSize:10},t.infoList=[],t.changeStatus=function(){_statusPicker.show(function(e){t.$apply(function(){t.searchData.businStatus=e[0].value}),t.infoList=[],t.listPage.pageNum=1,t.queryList()})},t.queryList=function(){return n.showBar(),o.post(BTPATH.QUERY_LIST_BILL,$.extend({},t.listPage,{businStatus:t.searchData.businStatus,flag:1})).success(function(o){n.hideBar(),/*!*/e.isCurrentData(o)&&t.$apply(function(){t.infoList=t.infoList.concat(o.data),t.listPage=o.page})})},t.showDetail=function(t){t.status+""=="0"||t.status+""=="1"?window.location.href="#/bill/detail/"+t.id:window.location.href="#/finance/detail/bill/"+t.id},/*!入口*/
t.$on("$routeChangeSuccess",function(){_statusPicker=n.singleSelect(_statusList),t.queryList()})}])}},function(t,e){e.installController=function(t,e){t.controller("tableView.Swiper",["$scope","muiSupport","http","$rootScope",function(t,e,n,o){t.delThisItem=function(t){mui.confirm("是否确认删除此项?","温馨提示",function(){})},t.$on("$routeChangeSuccess",function(){})}])}},function(t,e){e.installController=function(t,e){t.controller("bill.test",["$scope","muiSupport","http","$rootScope",function(t,n,o,i){_statusPicker={},_statusList=BTDict.BillNoteStatus.toArray("value","text"),t.searchData={businStatus:""},t.infoList=[],t.listPage={pageNum:1,pageSize:10},t.changeStatus=function(){_statusPicker.show(function(e){t.$apply(function(){t.searchData.businStatus=e[0].value}),t.infoList=[],t.listPage.pageNum=1,t.queryList()})},t.selectedItem=function(t){t.isChecked=!t.isChecked},t.applyFinance=function(){var e=ArrayPlus(t.infoList).objectChildFilter("checked",!0);if(console.log(t.infoList),0==e.length)return void mui.alert("请选择票据！");var n=ArrayPlus(e).extractChildArray("id",!0);cache.put("apply_finance_info",{type:"2",id:n}),window.location.href="#/financeBusi/apply"},t.applyInquiry=function(){var e=ArrayPlus(t.infoList).objectChildFilter("isChecked",!0);if(0==e.length)return void mui.alert("请选择票据！");if(e.length>1)return void mui.alert("只能选择单张票据！");var n=ArrayPlus(e).extractChildArray("id",!0);window.location.href="#/inquiry/do/"+n},t.queryList=function(){return n.showBar(),o.post(BTPATH.QUERY_LIST_BILL,$.extend({},t.listPage,{businStatus:t.searchData.businStatus,flag:1})).success(function(o){n.hideBar(),e.isCurrentData(o)&&t.$apply(function(){t.infoList=t.infoList.concat(o.data),t.listPage=o.page})})},t.showDetail=function(t){t.businStatus+""=="0"||t.businStatus+""=="1"?window.location.href="#/billPool/detail/unFi/"+t.id:window.location.href="#/billPool/detail/didFi/"+t.id},t.$on("$routeChangeSuccess",function(){t.queryList()})}])}},function(t,e){e.installRoute=function(t){t.config(["$routeProvider","$locationProvider",function(t,e){t.when("/home",{templateUrl:"views/home/home.html",controller:"homeController",title:"企e金服供应链金融"}).when("/home/entrance",{templateUrl:"views/home/entrance.html",controller:"home.entranceController",title:"二维码入口"}).when("/home/finance",{templateUrl:"views/home/homeFinance.html",controller:"home.financeController",title:"融资"}).when("/home/financeAll",{templateUrl:"views/home/homeFinanceAll.html",controller:"home.financeController",title:"融资"}).when("/home/single",{templateUrl:"views/home/homeSingle.html",controller:"home.singleController",title:"个人中心"}).when("/home/informa",{templateUrl:"views/home/homeInforma.html",controller:"home.informaController",title:"我的资料"}).when("/home/invest",{templateUrl:"views/home/homeInvest.html",controller:"home.financeController",title:"投资"}).when("/home/company",{templateUrl:"views/home/homecompanyprofile.html",controller:"home.companyprofileController",title:"关于我们"}).when("/home/introduct",{templateUrl:"views/home/homeintroduct.html",controller:"home.introductController",title:"公司简介"}).when("/more/security",{templateUrl:"views/more/security.html",controller:"more.securityController",title:"账号与安全"}).when("/more/more",{templateUrl:"views/more/more.html",controller:"more.moreController",title:"更多"}).when("/news/center",{templateUrl:"views/news/newsCenter.html",controller:"news.cneterController",title:"消息中心"}).when("/news/notice",{templateUrl:"views/news/newsNotice.html",controller:"news.noticeController",title:"公告消息"}).when("/news/personal",{templateUrl:"views/news/newsPersonal.html",controller:"news.personalController",title:"个人消息"}).when("/news/noticeDetail/:id",{templateUrl:"views/news/newsNoticeDetail.html",controller:"news.noticeDetailController",title:"消息内容"}).when("/news/personalDetail/:id",{templateUrl:"views/news/newsPersonalDetail.html",controller:"news.personalDetailController",title:"消息内容"}).when("/lead/financing/",{templateUrl:"views/lead/leadFinancing.html",controller:"lead.financingController",title:"选择融资类型"}).when("/lead/enquiry/",{templateUrl:"views/lead/leadEnquiry.html",controller:"lead.enquiryController",title:"选择询价类型"}).when("/recieve",{templateUrl:"views/recieve/recieve.html",controller:"recieveController",title:"企e金服应收账款"}).when("/recieve/detail/unFi/:id",{templateUrl:"views/recieve/recieveDetailUn.html",controller:"recieve.detailUnController",title:"应收账款详情"}).when("/recieve/detail/didFi/:id",{templateUrl:"views/recieve/recieveDetailDid.html",controller:"recieve.detailDidController",title:"已融资应收账款详情"}).when("/billPool",{templateUrl:"views/billPool/billPool.html",controller:"billPoolController",title:"企e金服票据池"}).when("/billPool/detail/unFi/:id",{templateUrl:"views/billPool/billPoolDetailUn.html",controller:"billPool.detailUnController",title:"未融资票据详情"}).when("/billPool/detail/didFi/:id",{templateUrl:"views/billPool/billPoolDetailDid.html",controller:"billPool.detailDidController",title:"已融资票据详情"}).when("/bill",{templateUrl:"views/bill/bill.html",controller:"billController",title:"企e金服票据池"}).when("/bill/detail/:id",{templateUrl:"views/bill/billDetail.html",controller:"bill.detailController",title:"企e金服票据详情"}).when("/billInvoice",{templateUrl:"views/bill/invoiceList.html",controller:"billInvoiceListController",title:"企e金服票据发票"}).when("/billUpload/:id",{templateUrl:"views/bill/uploadList.html",controller:"billUploadListController",title:"企e金服票据附件"}).when("/inquiryDo",{templateUrl:"views/inquiry/inquiryDo.html",controller:"billController"}).when("/inquiry",{templateUrl:"views/inquiry/inquiry.html",controller:"inquiryController"}).when("/inquiry/detail/:enquiryNo",{templateUrl:"views/inquiry/inquiryDetail.html",controller:"inquiry.detailController"}).when("/inquiry/abandon/:id",{templateUrl:"views/inquiry/inquiryAbandon.html",controller:"inquiry.abandonController"}).when("/inquiry/reply/:id",{templateUrl:"views/inquiry/inquiryReply.html",controller:"inquiry.replyController"}).when("/inquiry/offerRecord/:enquiryNo",{templateUrl:"views/inquiry/inquiryRecord.html",controller:"inquiry.recordController"}).when("/inquiry/do/:id",{templateUrl:"views/inquiry/inquiryDo1.html",controller:"inquiry.doController"}).when("/product",{templateUrl:"views/factoring/product.html",controller:"productController"}).when("/sign",{templateUrl:"views/sign/sign.html",controller:"signController",title:""}).when("/sign/detail/:id",{templateUrl:"views/sign/signDetail.html",controller:"sign.detailController"}).when("/sign/record",{templateUrl:"views/sign/signRecord.html",controller:"sign.recodeController"}).when("/sign/do/:appNo",{templateUrl:"views/sign/signFinance.html",controller:"sign.doController"}).when("/sign/protocol",{templateUrl:"views/sign/previewPro.html",controller:"signController"}).when("/register/basic",{templateUrl:"views/account/openAccountBasic.html",controller:"open.basicController",title:"填写基本资料"}).when("/register/upload",{templateUrl:"views/account/accountUpload.html",controller:"open.uploadController",title:"上传认证资料"}).when("/register/passwd",{templateUrl:"views/account/openAccountPasswd.html",controller:"open.passwdController",title:"设置密码"}).when("/register/show",{templateUrl:"views/account/openAccountShow.html",controller:"open.showController",title:"开户认证资料"}).when("/register/waitAudit",{templateUrl:"views/account/waitAudit.html",controller:"open.waitAuditController",title:"企e金服开户"}).when("/register/waitActive",{templateUrl:"views/account/waitActive.html",controller:"open.waitActiveController",title:"企e金服开户激活"}).when("/register/accountSuccess",{templateUrl:"views/account/accountSuccess.html",controller:"account.succeController",title:"开户成功"}).when("/relation/manage",{templateUrl:"views/relation/relationManage.html",controller:"relation.manageController",title:"客户关系管理"}).when("/relation/select",{templateUrl:"views/relation/relationSelect.html",controller:"relation.selectController",title:"选择客户类型"}).when("/relation/core/link",{templateUrl:"views/relation/coreRelated.html",controller:"relation.coreRelatedController",title:"关联授信核心企业"}).when("/relation/core/show",{templateUrl:"views/relation/coreRelatedShow.html",controller:"relation.coreShowController",title:"关联授信核心企业"}).when("/relation/core/detail",{templateUrl:"views/relation/coreRelatedDetail.html",controller:"relation.coreDetailController",title:"关联授信核心企业"}).when("/relation/factor/link",{templateUrl:"views/relation/factorRelated.html",controller:"relation.factorRelatedController",title:"开通保理融资业务"}).when("/relation/factor/attach",{templateUrl:"views/relation/factorAttach.html",controller:"relation.factorAttachController",title:"开通保理融资业务"}).when("/relation/factor/ensure",{templateUrl:"views/relation/factorEnsure.html",controller:"relation.factorEnsureController",title:"开通保理融资业务"}).when("/relation/factor/show",{templateUrl:"views/relation/factorRelatedShow.html",controller:"relation.factorShowController",title:"开通保理融资业务"}).when("/relation/factor/detail",{templateUrl:"views/relation/factorRelatedDetail.html",controller:"relation.factorDetailController",title:"开通保理融资业务"}).when("/model/financeApply/:id",{templateUrl:"views/model/financeApply.html",controller:"financeApplyCtrl",title:"申请提前回款"}).when("/model/financeDetail/:id/:version",{templateUrl:"views/model/financeDetail.html",controller:"financeDetailCtrl",title:"提前回款详情"}).when("/financeBusi/apply",{templateUrl:"views/financeBusi/financeApply.html",controller:"financeBusi.applyController",title:"融资申请"}).when("/financeBusi/detail/:requestNo",{templateUrl:"views/financeBusi/financeDetail.html",controller:"financeBusi.detailController",title:"融资详情"}).when("/financeSearch/pend",{templateUrl:"views/financeSearch/pendFinance.html",controller:"financeSearch.pendController",title:"待批融资"}).when("/financeSearch/repay",{templateUrl:"views/financeSearch/repayFinance.html",controller:"financeSearch.repayController",title:"还款融资"}).when("/financeSearch/history",{templateUrl:"views/financeSearch/historyFinance.html",controller:"financeSearch.historyController",title:"历史融资"}).when("/tradeContract/list",{templateUrl:"views/contract/tradeContractList.html",controller:"tradeContract.listController",title:"贸易合同"}).when("/tradeContract/add",{templateUrl:"views/contract/tradeContractAdd.html",controller:"tradeContract.addController",title:"添加贸易合同"}).when("/tradeContract/edit/:contractId",{templateUrl:"views/contract/tradeContractEdit.html",controller:"tradeContract.editController",title:"编辑贸易合同"}).when("/tradeContract/info/:type/:contractId",{templateUrl:"views/contract/tradeContractInfo.html",controller:"tradeContract.infoController",title:"合同信息"}).when("/tradeContract/upload/:contractId",{templateUrl:"views/contract/tradeContractUpload.html",controller:"tradeContract.uploadController",title:"上传合同附件"}).when("/tradeContract/attach/:contractId",{templateUrl:"views/contract/tradeContractAttach.html",controller:"tradeContract.attachController",title:"合同附件"}).when("/preImg/:id",{templateUrl:"views/plugin/preImg.html",controller:"preImgController",title:"附件预览"}).when("/temp",{templateUrl:"views/temp/tempList.html",controller:"tempController",title:"附件预览"}).when("/finance",{templateUrl:"views/finance/finance.html",controller:"financeController",title:"企e金服融资列表"}).when("/finance/do/:type/:id",{templateUrl:"views/finance/financeApply.html",controller:"finance.applyController",title:"企e金服融资详情"}).when("/finance/success",{templateUrl:"views/finance/financeSuccess.html",controller:"finance.successController",title:"申请成功"}).when("/finance/detail/:type/:id",{templateUrl:"views/finance/financeDetail.html",controller:"finance.detailController"}).when("/finance/select",{templateUrl:"views/finance/financeSelect.html",controller:"financeController"}).when("/register",{templateUrl:"views/account/register.html",controller:"accountController",title:"企e金服融资业务开户"}).when("/register/success",{templateUrl:"views/account/openSuccess.html",controller:"account.successController",title:"开户成功"}).when("/register/detail",{templateUrl:"views/account/accountInfo.html",controller:"account.detailController",title:"企e金服开户详情"}).when("/account403",{templateUrl:"views/account/403page.html",controller:"accountController",title:"您的访问出错了!"}).when("/accountBind",{templateUrl:"views/account/accountBind.html",controller:"account.bindController"}).when("/validatePhone",{templateUrl:"views/account/validatePhone.html",controller:"accountController"}).when("/register/factor",{templateUrl:"views/account/factorRegister.html",controller:"account.factorController",title:"开通保理融资业务"}).when("/demo/tableView/swiper",{templateUrl:"views/demo/tableView.Swiper.html",controller:"tableView.Swiper",title:"table-view swiper滑动"}).when("/demo/test",{templateUrl:"views/demo/test.html",controller:"bill.test",title:"测试中"}).otherwise({redirectTo:"/home"})}])}}]);